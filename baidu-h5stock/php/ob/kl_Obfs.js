(function(){J.cY.K={A1:'0,2',A2:'0,1,3,2',A3:'0,1.5,3,1.5',A4:'2,1,2,2',A5:'0,1.5,2,1.5',A6:'0,1.5,2,1.5',A7:'1,1.5,2,1.5',K:'0,0,3,3,-2',FULL:'0,0,4,3,-2',G:'0,0,2,1.5,-2',Q:'0,0,2,1.5,-2',O:'0,0,2,1.5,-2',Z:'0,0,2,1.5,-2',B:'0,1.5,2,1.5,-2'};J.fu.p(['K',J.ag('Chart')]);K=new J.dv(J.ag('Chart'),'K');$T.M(K.content,{o:'hidden'});if(window.T){KY.pK('<font style="font-size:11px">Enter</font>','分时/K线切换','','KY.mG()');}KY.pK('77','K线图','K');KY.pK('91','1分钟K线','','K.cp("1")');KY.pK('92','5分钟K线','','K.cp("5")');KY.pK('93','15分钟K线','','K.cp("15")');KY.pK('94','30分钟K线','','K.cp("30")');KY.pK('95','60分钟K线','','K.cp("60")');KY.pK('96','K线图日线','','K.cp("D")');KY.pK('97','K线图周线','','K.cp("W")');KY.pK('98','K线图月线','','K.cp("M")');KY.pK('99','K线图年线','','K.cp("Y")');KY.pK('A','K线全屏','','K.wT()');KY.pK('K','K线图','K');KY.pK('D','K线图日线,大图','K','K.cp("D")');KY.pK('M','K线图月线,大图','K','K.cp("M")');KY.pK('W','K线图周线,大图','K','K.cp("W")');KY.pK('F','复权','','K.nN(!K.q)');KY.pK('K1','实心阳线','','K.eU("iU")');KY.pK('K2','空心阳线','','K.eU("ib")');KY.pK('K3','美国线','','K.eU("gs")');KY.pK('K4','折线','','K.eU("line")');KY.pK('VOL','成交量','','K.selectKIndtype("volume")');KY.pK('MACD','MACD指标','','K.selectKIndtype("macd")');KY.pK('RSI','RSI指标','','K.selectKIndtype("rsi")');KY.pK('KDJ','KDJ指标','','K.selectKIndtype("kdj")');KY.pK('WR','WR指标','','K.selectKIndtype("wr")');KY.pK('PSY','PSY指标','','K.selectKIndtype("psy")');KY.pK('CCI','CCI指标','','K.selectKIndtype("cci")');KY.pK('BIAS','BIAS指标','','K.selectKIndtype("bias")');KY.pK('BOLL','布林线','','K.selectKIndtype("boll")');KY.pK('ZXMB','证星魔棒','','K.selectKIndtype("zxmb")');KY.pK('XFGJ','旋风轨迹','','K.selectKIndtype("xfgj")');KY.pK('XSTD','薛斯通道','','K.selectKIndtype("xstd")');KY.pK('DMA','DMA指标','','K.selectKIndtype("dma")');KY.pK('OBV','OBV指标','','K.selectKIndtype("obv")');KY.pK('TRIX','TRIX指标','','K.selectKIndtype("trix")');KY.pK('BRAR','BRAR指标','','K.selectKIndtype("brar")');KY.pK('DMI','DMI指标','','K.selectKIndtype("dmi")');KY.pK('CR','CR指标','','K.selectKIndtype("cr")');KY.pK('VR','VR指标','','K.selectKIndtype("vr")');KY.pK('ASI','ASI指标','','K.selectKIndtype("asi")');KY.pK('EMV','EMV指标','','K.selectKIndtype("emv")');KY.pK('ROC','ROC指标','','K.selectKIndtype("roc")');KY.pK('MTM','MTM指标','','K.selectKIndtype("mtm")');KY.pK('SAR','SAR指标','','K.selectKIndtype("sar")');KY.pK('MCST','MCST指标','','K.selectKIndtype("mcst")');(function(){K1={yO:false,color:C.av('C_t1'),gwdm:'S000001'};K.PSO={};K.MACD={V1:12,V2:26,V3:9};K.RSI={V1:6,V2:12};K.KDJ={V1:9,V2:3,V3:3};K.WR={V1:10};K.PSY={V1:6,V2:10};K.CCI={V1:84};K.BIAS={V1:6,V2:12,V3:24};K.BOLL={V1:20};K.MAV={};K.MAP={};K.ZXMB={};K.XFGJ={};K.XSTD={};K.DMA={};K.OBV={};K.TRIX={};K.BRAR={};K.DMI={};K.CR={};K.VR={};K.ASI={};K.EMV={};K.ROC={};K.MTM={};K.SAR={};K.MCST={};K.line='D';K.fL=2;K.nA=5;K.q=0;K.gI=1;K.cO=0;K.gJ=B.jL?[1,1,1,1,1,1]:[0,0,0,0,0,0];K.dB=B.jL?1:0;K.jS=B.jL?1:0;K.rn={iU:J.ag('Candlesticks_I'),ib:J.ag('Candlesticks_II'),gs:J.ag('OHLC_Bars'),line:J.ag('Area')};K.style='iU';K.vD=0;K.tz=1;K.dA=0;K.AP_A={D:[5,10,20,60,120,250],W:[4,13,26,52,104],M:[3,6,12,24],Y:[3],5:[3,6,12,24,48],15:[4,8,16,32],30:[4,8,16,40],60:[4,8,20,40]};K.AV=[5,10,20];})();K.cC=function(){K.MAV.data=null;K.MACD.data=null;K.RSI.data=null;K.KDJ.data=null;K.WR.data=null;K.PSY.data=null;K.CCI.data=null;K.BIAS.data=null;K.BOLL.data=null;K.ZXMB.data=null;K.XFGJ.data=null;K.XSTD.data=null;K.DMA.data=null;K.OBV.data=null;K.TRIX.data=null;K.BRAR.data=null;K.DMI.data=null;K.CR.data=null;K.VR.data=null;K.ASI.data=null;K.EMV.data=null;K.ROC.data=null;K.MTM.data=null;K.SAR.data=null;K.MCST.data=null;K.MAP.data=[];K.aR=K.hD();K.kz();K.fc=1;K.BW='ma';K.BN='volume';K.Bw();};K.hD=function(){return K.dA?'macd':'volume'};(function(){K.content.onmouseover=function(){$T.bU(K.nK);if($T.aN(K.ce)){$T.V(K.dh);K.content.onmousemove();}};K.content.onmousemove=function(){if(K.cO){$T.V(K.cf,59)}};K.content.onmouseout=function(){K.nK=setTimeout('K.hide()',100);};K.hide=function(){$T.H(K.dh,58);$T.H(K.eL,59);$T.H(K.cf,59)};K.eQ=$T.A(K.content);K.ny=$T.AC(K.content);K.oi=$T.A(K.content);K.mT=$T.A(K.content);K.hq=$T.AC(K.mT);$T.dN(K.mT,0.5);K.CO=$T.A(K.content);K.BY=$T.AC(K.CO);K.lT=$T.A(K.content);K.qQ=$T.A(K.content);K.qK=$T.AC(K.lT);K.qR=$T.AC(K.qQ);K.hv=$T.A(K.content);K.qM=$T.AC(K.hv);if(K1.yO)$T.V(K.hv);else $T.H(K.hv,112);K.fh=$T.A(K.content);$T.M(K.fh,{o:"hidden"});K.AVP=[$T.A(K.fh),$T.A(K.fh),$T.A(K.fh),$T.A(K.fh),$T.A(K.fh),$T.A(K.fh)];K.lJ=[$T.AC(K.AVP[0]),$T.AC(K.AVP[1]),$T.AC(K.AVP[2]),$T.AC(K.AVP[3]),$T.AC(K.AVP[4]),$T.AC(K.AVP[5])];K.tI=$T.A(K.fh);K.Ab=$T.A(K.content);$T.M(K.Ab,{o:"hidden"});K.SS=[$T.A(K.Ab),$T.A(K.Ab),$T.A(K.Ab),$T.A(K.Ab)];K.CQ=[$T.AC(K.SS[0]),$T.AC(K.SS[1]),$T.AC(K.SS[2]),$T.AC(K.SS[3])];K.mi=$T.A(K.content);K.mi.style.fontSize='11px';K.volume=$T.A(K.content);K.rq=$T.AC(K.volume);K.ug=$T.A(K.volume);K.uj=$T.A(K.volume);K.uq=$T.A(K.volume);K.uo=$T.A(K.volume);K.rA=$T.AC(K.uj);K.rr=$T.AC(K.uq);K.op=$T.AC(K.uo);K.kF=$T.A(K.volume);K.fC=$T.A(K.content);K.qU=$T.AC(K.fC);K.qT=$T.A(K.fC);K.vP=$T.A(K.fC);K.dS=$T.AC(K.vP);K.km=$T.A(K.fC);K.hT=$T.A(K.content);K.ra=$T.A(K.content);K.ow=$T.AC(K.content);if(window.HB)HB={content:$T.A(K.content)};K.dh=$T.A(K.content);$T.H(K.dh,76);K.er=$T.A(K.dh);K.fw=$T.A(K.er);$T.dN(K.fw,.5);K.bY=$T.A(K.er);K.dZ=$T.A(K.dh);K.gV=$T.A(K.dZ);$T.dN(K.gV,.5);K.gN=$T.A(K.dZ);$T.dN(K.gN,.5);K.dI=$T.A(K.dZ);K.eL=$T.A(K.dZ,{l: -3});K.eL.className='dot';$T.I(K.eL,'●');$T.H(K.eL,146);K.ce=$T.A(K.content);K.ce.onmousemove=function(e){J.key=0;if(!e)e=window.event;K.iq(e.clientX-K.mw,e.clientY-K.mA)};K.ce.onmousedown=function(e){K.ce.style.cursor="w-resize";K.xx=B.jL?e.pageX:event.clientX;};K.ce.onmouseup=function(e){K.ce.style.cursor="default";var z=B.jL?e.pageX:event.clientX;if(M.a(z-K.xx)>10){K.bN+=R((z-K.xx)*5/K.width);K.resize(1,'Mousemove')}};K.ce.onclick=function(a){if(!a&&window.HB){HB.start();}K.ht(!K.cO);K.content.onmousemove();K.cR();K.iq();};K.ce.ondblclick=function(a){LB.aQ('K')};K.ce.AM=function(a){K.ht(!K.cO);K.content.onmousemove();K.cR();K.iq();};K.nf=$T.AC(K.content);$T.jR(K.nf,260,30);K.menu=$T.A(K.content);K.oS=$T.A(K.content);K.cf=$T.A(K.content,{w:J.lang=='1'?102:122});K.oO=$T.A(K.content);var wg=function(bP){this.canvas=$T.AC(K.oO);$T.jR(this.canvas,30,30);this.bP=bP;this.canvas.bb=this;this.canvas.bu=0;this.lU=function(status){var bP=this.bP,r=12,z=r*2,cX=status?'#232323':'#5f6064',iR=status?'#232323':'#464950',gW=status?'#232323':'#ffffff',iS=status?'#232323':'#bcbcbc',aK=this.canvas.aK.i();aK.vw().tl(15-r,15-r).b().l(0,1).l(1,1).l(1,0).l(z-1,0).l(z-1,1).l(z,1).l(z,z-1).l(z-1,z-1).l(z-1,z).l(1,z).l(1,z-1).l(0,z-1).c().f('#000000').b().l(2,3).l(2,2).l(z-2,2).l(z-2,3).l(z-2,z-2).l(z-3,z-2).l(2,z-2).l(2,z-3).c().gp(2,2,2,z-2,[[0,gW],[1,iS]],true).s().gp(2,2,2,z-2,[[0,cX],[1,iR]]).f().yX();aK.vw().tl(15,15).b();var z=r*0.4,im=z/4;if(bP==0){aK.m(-z,-z).l(-z,z).m(z,-z).l(0,0).l(z,z);}else if(bP==1){aK.m(0-im,-z).l(-z-im,0).l(0-im,z).m(z,-z).l(0,0).l(z,z);}else if(bP==2){aK.m(z/2,-z).l(-z/2,0).l(z/2,z);}else if(bP==3){aK.m(-z,0).l(z,0).m(0,-z).l(0,z);}else if(bP==4){aK.m(-z,0).l(z,0);}else if(bP==5){aK.m(-z/2,-z).l(z/2,0).l(-z/2,z);}else if(bP==6){aK.m(0+im,-z).l(z+im,0).l(0+im,z).m(-z,-z).l(0,0).l(-z,z);}else if(bP==7){aK.m(z,-z).l(z,z).m(-z,-z).l(0,0).l(-z,z);}aK.cW(3).s('#000000').cW(2).s('#ffffff').yX();};this.canvas.onmouseover=function(){var a=this;$T.bU(a.bu);a.bb.lU(1);a.bu=setTimeout(function(){a.onmouseout()},1000);};this.canvas.onmouseout=function(){this.bb.lU();};this.canvas.onclick=function(){var map=[36,33,37,38,40,39,34,35];K.jq(map[this.bb.bP]);}};K.oE=[];var b;for(var i=0;i<8;i++){b=new wg(i);$T.M(b.canvas,{l:28*i});b.lU();K.oE.push(b.canvas)}K.qY=$T.A(K.content);K.eo=$T.A(K.content);K.eo.style.padding='10px';K.eo.style.fontSize='14px';K.eo.style.lineHeight='20px';K.pO=$T.A(K.content);})();K.pU=function(){return $T.az(K.dZ.style.left)+$T.az(K.ce.style.left)-$T.az(K.lT.style.left)};K.kB=function(){if(K.wait)return;K.cC();if(!$T.aW(K.line)&&K.line!='1'){J.oW(K.line);}if($T.find('WMY',K.line)){delete E(K.line);J.oX(K.line);}K.aJ=$T.ao(E(K.line));K.now=K.aJ-1;K.gwdm=J.gwdm;if(!E(K.line))return;K.dM=$T.ao(K.AP_A[K.line]);var be,gi=0,af=[],hh,fZ=[];K.fZ=[];K.mp=$T.ao(K.AV);if(E().bn){var le=$T.ao(E().bn)-1}for(var i=0,ah=K.aJ;i<ah;i++){af=E(K.line)[i];if(!af)continue;if(E().bn){if(typeof(af[7])=='undefined'){while(E().bn[le]&&af[0].substring(0,8)>=E().bn[le][0]){le--;}af[7]=le;}}hh=af[7];for(var k=0;k<K.dM;k++){if(i==0)fZ[k]=0;if(i>=K.aS('AP_A',K.line,k))fZ[k]-=K.an(i-K.aS('AP_A',K.line,k),4,1);if(i==ah-1)K.fZ[k]=fZ[k];fZ[k]+=K.an(i,4,1)}K.MAP.data[i]=[];for(var k=0;k<K.dM;k++){K.MAP.data[i][k]=(i>=K.aS('AP_A',K.line,k))?[K.pe(be=$T.F(fZ[k]/K.aS('AP_A',K.line,k),+E().aO+1),hh,1),be]:[null,null]}}K.bN=0;if($T.aN(K.div))K.resize(1);};K.sS=function(){if(K.wait)return;if(K.aJ!=$T.ao(E(K.line))){K.kB();return}if(!K.aJ|| !E(K.line)||K.gwdm!=J.gwdm)return;var be,ba,af,qp=K.iJ();af=E(K.line)[K.aJ-1];if($T.aW(K.line)&&qp){var y=[],y2=[];for(var i=0;i<K.mp;i++){y.p(K.aJ-1>K.aS('AV',i)?R((K.ba[i]+K.an(K.aJ-1,5))/K.aS('AV',i)):0);}var fG=(y[3]+y[4]+y[5]+y[6])/4;y.p(M.iV(M.a(y[3]-fG),M.a(y[4]-fG),M.a(y[5]-fG),M.a(y[6]-fG)));qp[K.aJ-1]=y;}var hh=af[7],map=K.sm();if(!map[K.aJ-1]||af[2]>K.max||af[3]<K.min)K.kz();map[K.aJ-1]=[];for(var i=0;i<K.dM;i++){be=$T.F((K.fZ[i]+K.an(K.aJ-1,4,1))/K.aS('AP_A',K.line,i),+E().aO+1);map[K.aJ-1][i]=K.aJ-1>=K.aS('AP_A',K.line,i)?[K.pe(be,hh,1),be]:[0,0]}K.fl=0;if(K.to==K.aJ&&K.line=='D'){if(E().aP>2&&E().aP<240){K.fl=E().fm*240/E().aP;K.last.fc=M.iV(K.fc,K.fl);}}if(K.fp>0&&$T.aN(K.div)){K.resize();}};K.resize=function(a){if(!$T.aN(K.div)){LB.aQ('K');return;}if($T.aF(K.aJ)){return}if(window.LB){if(!$T.aF(K.lx)){K.aR=K.lx;K.q=K.lD;}}if(K.aR=='volume'){K.aR=K.hD();}if(a==1){K.kz();K.last='';}K.wh();if(K.start==K.bN&&mN()){}if(K.change){K.zq();K.pd();K.mt();pa();K.tU();K.cR();if(window.HB){HB.resize();}}if(K.change||K.aR=='volume'){K.vt(K.aR,'K.resize');}if(K.dA)K.sz();K.uJ();K.ht(K.cO);var w=K.fp;$T.jR(K.oK,w,8);var aK=K.oK.aK;aK.m(0.5,0.5).l(w-0.5,0.5).l(w-0.5,4.5).l(0.5,4.5).c().f('#37467D').cW(1.5).s($T.aA('#000000',0.9));if(K.line==="D"||K.line==='W'){K.BG();}};K.wh=function(a){if(!K.dA){K.dc=K.cF>2?6:4;K.hz=K.dc/3;}else if(K.dA==1){K.dc=4;K.hz=4;}else if(K.dA==2){K.dc=3;K.hz=3;}K.fY=2;K.ko=2;K.cB=$T.F((K.ef-30-($T.find('DWMY',K.line)?76:93))/(K.dc+K.hz));K.hx=R(K.cB*K.dc);K.wb=R(K.cB*K.hz);if(K.dA){K.dq=R(K.wb/2);K.bv=R(K.wb/2);}else{K.dq=K.wb;K.bv=K.wb;}K.iL=K.dq/K.fY;K.fQ=K.bv/K.ko;K.inter=J.inter;K.bs=M.iV(0,K.fp-20-J.inter);K.la=M.kC(1,$T.F((K.bs-20)/K.aJ/4,5));if(K.fL<K.la){K.fL=K.la}K.width=(function(a){var z;if(a<1){z=a*4;}else if(a==1){z=5;}else{z=(a+a+1)*1.618}return z})(K.fL);K.step=(1||B.by&& !B.dk)?M.iV(1,R(2/K.width)):1;K.cT=K.width*K.step;K.eO=M.f(K.bs/K.width);K.aP=M.kC(K.eO,K.aJ);var qW=K.fL>5?1:2;K.start=K.aJ>=K.eO-qW?K.aJ-M.iV(K.eO-qW,1):0;K.bN=M.iV(0,M.kC(K.start,K.bN));K.from=K.start-K.bN;K.to=M.kC(K.aJ,K.from+K.eO);K.now=M.iV(K.from,M.kC(K.from+K.aP-1,K.aJ-1,K.now));K.lM=K.fL<.4||(K.fL<.9&&B.by&& !B.dk);K.bp=M.iV(K.fL+K.fL,2);var af,ae,L;if(!K.max){K.fc=0.1;for(var i=K.from;i<K.to;i++){if(!E(K.line)|| !E(K.line)[i])continue;if(i>=K.aJ)i=K.aJ-1;af=E(K.line)[i];ae=K.an(i,2,K.q);if(ae>K.max){K.max=ae;K.wQ=i}ae=K.an(i,3,K.q);if(ae<K.min&&ae>0){K.min=ae;K.vc=i}K.fc=M.iV(K.fc,$T.az(K.an(i,5,0)));}}K.fl=0;if(K.to==K.aJ&&K.line=='D'){if(E().aP>2&&E().aP<240){K.fl=(E().fm||0)*240/E().aP;K.fc=M.iV(K.fc,K.fl);}}K.oM=J.oI(K.fc,K.fY)||1;if(K.max==K.min){K.max=K.min*1.5;K.min/=2}if(K.gI==1){var nU=K.max*1.01-K.min,af=M.p(10,M.f(M.log(nU)/M.LN10)),oP=nU/af;K.fV=M.iV((M.cl(nU*12/af/K.dc))*af/10,0.01);if(K.fV>1)K.fV=M.cl(K.fV);if(oP<2){K.cz=$T.F(R((K.max+K.min)*5/af)*af/10-K.fV*K.dc/2);}else if(oP<4){K.cz=$T.F(R((K.max+K.min)*2.5/af)*af/5-K.fV*K.dc/2);}else{K.cz=$T.F(R((K.max+K.min)/af)*af*.5-K.fV*K.dc/2);}K.rate=K.cB/K.fV;K.gY=K.hx+R(K.cz*K.rate);}else{K.cz=K.min;K.gY=K.hx*(K.cF>2?.93:.85);K.kr=M.log(K.max/K.cz)/(K.cF>2?.83:.63);K.rate=K.hx/K.kr;K.sD=(M.p(M.E,K.kr)-1)*100/K.dc;}K.change=K.last&&J.df%60>5?0:1;for(var i in K.last){if($T.aF(K.last[i])||K.last[i]!=K[i]){K.change=1;break;}}K.last={gwdm:K.gwdm,fL:K.fL,size:K.size,aJ:K.aJ,fc:K.fc,q:K.q,style:K.style,aR:K.aR,line:K.line,iL:K.iL,fQ:K.fQ,eO:K.eO,aP:K.aP,start:K.start,bN:K.bN,oM:K.oM,cz:K.cz,rate:K.rate,gI:K.gI}};K.zq=function(){var x=28,v=x+K.hx+1,w=v+J.inter-1,u=2;K.dV=w;$T.I(K.title,$T.au(['<font class="Modtitle">',J.ag('Chart'),'</font>','<font class="Intitle">|</font>',J.gwdm.substring(1),E().eS,(E().bn?(K.q?'复权':'除权'):'')],' '));$T.M(K.mi,{l:u+2,t:x});$T.I(K.mi,E().bn?' '+(K.q?'复权':'除权'):'');var fb='class = "zxggroup1" style="width:40px;text-align:left;"';if(J.oj==0||J.oj==6){$T.V(K.eQ);$T.M(K.eQ,{l:K.fp-50});$T.I(K.eQ,'<input type="button" '+fb+'  style="width:40px" onclick="K.vM()" value="走势" />');}else if(($T.find(' '+J.aH,' J')||J.aH=='K'||J.aH=='T')&& !J.phone){$T.V(K.eQ);$T.M(K.eQ,{l:K.fp-38,t:7});$T.I(K.eQ,K.size==4?'<img src="img/arrow_left.gif"  class="btn" onclick=\'K.k2k("K", "K")\' />':'<img src="img/arrow_right.gif" class="za" onclick=\'K.iM("K", "FULL")\' />')}else{$T.H(K.eQ);}$T.M(K.ny,{l:u,t:x});$T.jR(K.ny,K.bs,K.hx);$T.M(K.oi,{l:u,t:x});$T.M(K.hv,{l:u,t:x});$T.jR(K.qM,K.bs,K.hx);$T.M(K.lT,{l:u,t:x});$T.M(K.qQ,{l:u,t:x});$T.jR(K.qK,K.bs,K.hx);$T.jR(K.qR,K.bs,K.hx);$T.M(K.mT,{l:u,t:x});$T.jR(K.hq,K.bs,K.hx-10);$T.M(K.CO,{l:u,t:x+K.hx-40});$T.jR(K.BY,K.bs,30);$T.M(K.fh,{l:u,t:x+3,w:K.bs,h:K.hx-2});for(var i=0;i<K.dM;i++){$T.jR(K.lJ[i],K.bs,K.hx-4)}$T.M(K.Ab,{l:u,t:x+3,w:K.bs,h:K.hx-2});for(var i=0;i<4;i++){$T.jR(K.CQ[i],K.bs,K.hx-4)}$T.M(K.hT,{l:u+(E().bn?34:0),t:x-4});$T.I(K.hT);$T.M(K.volume,{l:u,t:w,w:K.bs,h:K.dq});$T.jR(K.rA,K.bs,K.dq);$T.jR(K.rr,K.bs,K.dq);$T.jR(K.op,K.bs,K.dq);if(K.dA){$T.M(K.fC,{l:u,t:w+K.dq,w:K.bs,h:K.dq});}else{$T.M(K.fC,{l:u,t:w,w:K.bs,h:K.dq});$T.H(K.fC);}$T.jR(K.dS,K.bs,K.bv);$T.M(K.ra,{l:u,t:w+K.wb});$T.M(K.ow,{l:u,t:w+K.wb});if(window.HB){$T.M(HB.content,{l:u,t:x});}$T.M(K.dh,{l:u,t:x});$T.M(K.ce,{l:u,t:x,w:K.bs,h:K.hx+K.inter+K.wb});if(B.dk){$T.M(K.ce,{b:'#ffffff'});$T.dN(K.ce,0.01);}$T.M(K.oS,{l:u,t:x});K.eL.style.color=C.av('C_pointK');$T.M(K.menu,{l:u,t:v+2});$T.M(K.nf,{l:u,t:v+2});$T.M(K.cf,{t:x+K.size+(K.size>1.5?20:0),b:C.av('C_textbg'),bd:'1px solid '+C.av('C_border')});K.nm(K.Ai());$T.M(K.oO,{l:K.bs-220,t: -1});$T.M(K.qY,{l:3,t:K.size>1.5?0:2});$T.M(K.fw,{l:1,w:K.bs-1,h:1,b:C.av('C_stick'),o:'hidden'});$T.M(K.bY,{l:K.bs+1,t: -8,w:55,h:16,b:C.av('C_textbg'),bd:'1px solid '+C.av('C_stick')});$T.M(K.gV,{t:1,w:1,h:K.hx-1,b:C.av('C_stick')});$T.M(K.gN,{t:K.hx+J.inter+1,w:1,h:K.wb-1,b:C.av('C_stick')});$T.M(K.dI,{t:K.hx+K.wb+J.inter+1,b:C.av('C_textbg'),bd:C.av('C_stick')});$T.M(K.eo,{b:C.av('C_textbg'),bd:'1px solid '+C.av('C_border')});K.eo.onmouseout=function(){$T.H(K.eo)};$T.H(K.eo,842);K.mw=$T.az(J.bD.style.left)+$T.az(K.div.style.left)+$T.az(K.content.style.left)+$T.az(K.dh.style.left)-document.body.scrollLeft;K.mA=$T.az(J.bD.style.top)+$T.az(K.div.style.top)+$T.az(K.content.style.top)+$T.az(K.dh.style.top)-document.body.scrollTop;$T.M(K.dI,{t:K.hx+K.wb+J.inter+1});$T.M(K.pO,{t:K.ef-30});};K.Bo=['主图指标','附图指标','特色指标'];K.oJ=[];K.gS=[['ma',54,0],['boll',63,0],['volume',72,0],['macd',72,0],['kdj',56,0],['dmi',60,0],['dma',62,0],['wR',62,0],['rsi',54,0],['pV',47,0],['psy',56,0],['zxmb',83,0],['xfgj',83,0],['xstd',83,0]];K.jp=K.gS.length;K.Bw=function(){$T.I(K.pO);for(var i=0;i<K.jp;i++){var z=$T.AC(K.pO,{cursor:'pointer'});z.width=K.gS[i][1];z.height=30;z.dF=K.gS[i][0];z.onclick=function(){K.bX(this.dF);K.Bl();};K.oJ[i]=z;}$T.A(K.pO,{i:K.Bo[0],w:50,fontSize:'12px',t:8});$T.A(K.pO,{i:K.Bo[1],w:50,fontSize:'12px',t:8,l:159});$T.A(K.pO,{i:K.Bo[2],w:50,fontSize:'12px',t:8,l:669});K.Bl=function(){var y,Bp=40,x=Bp;for(var i=0;i<K.jp;i++){y=K.gS[i];switch(i){case 2:x+=Bp+20;break;case 11:x+=Bp+20;break;}window.G&&G.Bs(K.oJ[i],x,y[1],y[0]==K.BW||y[0]==K.BN,y,Bu(y[0]));$T.M(K.oJ[i],{zIndex:y[0]==K.BW||y[0]==K.BN?K.jp+1:K.jp-i});x+=y[1]-10;}};K.Bl();K.oK=$T.AC(K.pO,{h:8,zIndex:K.jp});};K.Az=function(focus){var focus=focus||'volume';K.BN=focus;K.aR=focus;K.vt(focus,"K.resize");K.Bl();K.bX(focus);};K.vM=function(){LB.aQ('T',1);};K.iM=function(a,b){J.yU(K,a,b);K.resize(1,'K.iM')};K.wT=function(){LB.aQ('K');if(K.size==4)K.iM('K','K');else K.iM('K','FULL');};K.sn=function(a){switch(a){case 'Y':return J.ag('Year');case 'M':return J.ag('Month');case 'W':return J.ag('Week');case 'D':return J.ag('Day');default:return a+J.ag('m');}};K.uJ=function(a){var aK=K.qR.aK.i();switch(K.style){case 'gs':aK.cW(K.fL>5?4:2);case 'ib':case 'iU':if(K.to==K.aJ&& !K.lM){K.iw((K.to-1-K.from)*K.width+K.bp,K.to-1,aK,K.style);}}var _=[];if(K.change){var y,ae,L=K.bp,ba=K.bs+2;_=[];if(K.fL<3)y=3/K.fL;else y=1;ae=K.nA*K.width*y;J.hW(K.ny,0,0,ae,K.cB,K.bs/ae,K.dc,C.av('C_border'),L-ae,0);for(var i=0;i<=K.dc;i++){if(K.gI==1){t=$T.F(i*K.fV+K.cz,E().aO);if(t>0)_.p(J.bJ(ba,K.hx-i*K.cB+(i==0? -14:(i==K.dc? -1: -9)),t,"",C.av('C_barup'),'',"left"))}else{_.p(J.bJ(ba,K.hx-i*K.cB+(i==0? -14:(i==K.dc? -1: -9)),$T.F((i-K.dc/2)*K.sD)+'%',"",C.av('C_barup'),'',"left"))}}$T.I(K.oi,$T.au(_));_=[];var aK=K.qK.aK.i(),kt=K.bp;if(K.style=='line'||K.lM){L=kt;if(K.style=='line'){var mC=aK.createLinearGradient(0,0,0,K.hx);mC.addColorStop(0,C.av('C_kline_fr'));mC.addColorStop(1,C.av('C_kline_to'));aK.m(kt,K.hx);for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}aK.l(L,K.bH(K.an(i,4,K.q)));L+=K.cT}aK.l(L-K.width,K.hx).l(kt,K.hx).c().f(mC);}L=kt;aK.cW(M.kC(M.iV(K.fL/2,1),4));K.lL(aK,function(i){return K.bH(K.an(i,4,K.q))},C.av('C_linechart'),1);}else{switch(K.style){case 'gs':aK.cW(K.fL>5?4:2);case 'ib':case 'iU':for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}K.iw(L,i,aK,K.style,1);L+=K.cT}}}K.sM();}};K.sM=function(){var L=K.bp,dR,ct,_=[];for(var i=K.from;i<K.to;i++){_.p(sP(L,i));if(i==K.wQ){dR=K.an(i,2,K.q);_.p(J.bJ(L,K.bH(dR)-14,$T.F(dR,E().aO),12))}if(i==K.vc){ct=K.an(i,3,K.q);_.p(J.bJ(L,K.bH(ct),$T.F(ct,E().aO),12))}L+=K.width}$T.I(K.oS,$T.au(_))};pa=function(){if(K.line!='D'|| !K1.yO)return;var aK=K.qM.aK.i(),gq=J.cache[K1.gwdm].D;if(gq&&J.gwdm!=K1.gwdm){var L=K.bp,gG=K.from+$T.ao(gq)-$T.ao(E(K.line)),sI=K.to+gG-K.from,lq={rate:K.rate,cz:K.cz,wn:C.av('C_barup_K'),wm:C.av('C_bardown_K')};if(gG<0)return;K.rate=K.rate*K.an(K.from,4,K.q)/K.fM(gq[gG][4],gq[gG][7],K.q);K.cz=K.cz*K.fM(gq[gG][4],gq[gG][7],K.q)/K.an(K.from,4,K.q);iE('C_barup_K','gray');iE('C_bardown_K','gray');for(var i=gG;i<sI;i+=1){K.iw(L,i,aK,'ib','',gq);L+=K.cT}K.rate=lq.rate;K.cz=lq.cz;iE('C_barup_K',lq.wn);iE('C_bardown_K',lq.wm)}};K.iw=function(L,b,aK,c,d,e){var cL,dR,ct,cI,kV;if(!e)e=E(K.line);var aE=e[b]||[],hh=aE[7]||0;cL=K.an(b,1,K.q,e);dR=K.an(b,2,K.q,e);ct=K.an(b,3,K.q,e);cI=K.an(b,4,K.q,e);if(!d||b!=K.aJ-1){if(!cL|| !dR|| !ct|| !cI)return;if(cI>cL||(cI==cL&&cI>=K.an((b>0)?b-1:b,4,K.q,e))){kV=C.av('C_barup_K');var up=1}else{kV=C.av('C_bardown_K');var up=0;if(c!='gs'){var be=cL;cL=cI;cI=be}}aK.bq(kV).eE(kV);var Bn=K.bH(dR),uh=K.bH(ct),jC=K.bH(cL),gd=K.bH(cI),fT=K.fL>500?3:1,hk=K.fL>500?1:0;J.cJ(aK,L-hk,Bn,fT,Bn-uh+1,'K1256');if(K.fL>=1){if(c=='SAR'){J.cJ(aK,L-K.fL,jC-hk,K.fL+1,fT,'K1257');J.cJ(aK,L,gd-hk,K.fL+1,fT,'K1258');var iF=K.SAR.data[1][b],value=K.bH(K.SAR.data[0][b]),x=L,y=value-hk,iB,r=K.fL+1;if(iF==true){iB=C.av('C_barup_K');}else if(iF==false){iB=C.av('C_bardown_K');}aK.eJ(x+r/3,y+r/3,0,x+r/3,y+r/3,r+r/3,[[0.00,$T.aA(iB,1)],[0.90,$T.aA(iB,0.1)],[1.00,$T.aA(iB,0)]]).b().a(x,y,r,0,PI*2,false).c().f();}else if(c=='gs'){J.cJ(aK,L-K.fL,jC-hk,K.fL+1,fT,'K1257');J.cJ(aK,L,gd-hk,K.fL+1,fT,'K1258')}else if(c=='ib'&&up){aK.bq(C.av('C_bg'));J.cJ(aK,L-K.fL,gd,K.fL+K.fL+1,M.iV(fT,jC-gd+1),'K1267');J.kN(aK,L-K.fL,gd,K.fL+K.fL+1,M.iV(fT,jC-gd+1),'K1266');}else{J.cJ(aK,L-K.fL,gd,K.fL+K.fL+1,M.iV(fT,jC-gd+1),'K1261')}}if(J.ea)aK.s();}};K.mt=function(){var _=[];var x=E();_.p('<table border="0" cellspacing="0" cellpadding="0"><tr>');if(K.bk>=2){var fS=J.bk(K.bk)<490?'':'bigfont';_.p('<td><NOBR>');_.p('<font class="'+fS+'" style="color:'+C.av('C_gwdm')+'">'+J.gwdm.substring(1)+'</font> ');_.p('<font title="',x.title,'" class="'+fS+'" style="color:'+C.av('C_linechart')+'">'+x.eS+'</font> ');_.p('<font class="'+fS+'" style="color:'+C.av('C_linechart')+'">'+K.sn(K.line)+'</font>');_.p('</NOBR></td>');_.p('<td width=10></td>')}if(x.bn){_.p('<td>');_.p('<table class="cllps" border="0" cellspacing="0" cellpadding="0"><tr>');_.p('<td width=32 class="zxggroup'+(K.q?2:1)+'" onClick="K.nN(!K.q)">'+$T.nobr('复权')+'</td>');_.p('</tr></table>');_.p('</td>');_.p('<td width=5></td>')}if(K.bs>400){_.p('<td valign="middle">');_.p('<select onchange="K.eU(this.value);">');for(var x in K.rn){_.p('<option value="'+x+'" '+(K.style==x?'selected':'')+'>'+K.rn[x]+'</option>');}_.p('</select>');_.p('</td>');_.p('<td width=5></td>')}if(J.phone||J.cD>560){var dir={};if(J.phone){delete dir[3];delete dir[6];}_.p('<td>');_.p('<table border="0" cellspacing="0" cellpadding="0"><tr>');for(var key in dir){_.p('<td width=26 onclick=K.jq('+dir[key][0]+')>'+dir[key][1]+'</td>')}_.p('</tr></table></td>');_.p('<td width=5></td>');}if(window.HB){_.p('<td width="32"><img style="background-color:#f0f0f0" src="img/pen.gif" onclick="HB.start();this.blur()" border="0" /></td>');_.p('<td width=5></td>');}_.p('</tr></table>');$T.I(K.qY,$T.au(_))};K.cR=function(){if(0&&K.line!='D'){$T.H(K.menu,1273)}else{var aK=K.nf.aK.i();for(var i=0;i<K.dM;i++){J.dW(aK,(i)*27.3,24,K.gJ[i]?0: -1,i==0,i==K.dM-1);}var _=[];_.p('<table cellpadding=0 cellspacing=0 border=0><tr>');if(0&& !J.phone){_.p('<td width=40 class="zxggroup'+(K.cO?2:1)+'" onClick="K.mouse.ondblclick2()">'+J.ag('Crosshair')+'</td>');_.p('<td width=5></td>')}if(K.bs>400){_.p('<td>');_.p('<table cellpadding=0 cellspacing=0 border=0><tr>');for(var i=0;i<(K.size>1.5?K.dM:K.dM);i++){_.p('<td width=27 ');_.p('onclick="K.changeMA('+i+',this)" ');_.p('style="cursor:pointer;text-align:center;color:'+C.av('C_kavg'+i)+'">');_.p($T.nobr(K.aS('AP_A',K.line,i))+'</td>')}_.p('</tr></table>');_.p('<td width=5></td>')}_.p('<td>');var y=['1','5','15','30','60','D','W','M','Y'];_.p('<select onchange="K.changeLine(this.value)">');for(var i=0,ah=$T.ao(y);i<ah;i++){_.p('<option value="'+y[i]+'" '+(K.line==y[i]?'selected':'')+'>'+K.sn(y[i])+'</option>')}_.p('</select>');_.p('</td>');_.p('<td width=5></td>');var ba=['ma','mv'];if(!K.dA)ba.p('volume');ba.p('macd','rsi','kdj','wr','psy','cci','dma','obv','wR','brar','dmi','pV','vr','asi','emv','roc','mtm','sar','boll','zxmb','xfgj','xstd');if(K.gwdm!=K1.gwdm&&K.line=='D'&&J.cache['S000001']){ba.unshift('S000001');}_.p('<td valign="middle">');_.p('<select onchange="K.selected(this.value)">');for(var i=0,ah=ba.length;i<ah;i++){_.p('<option value="'+ba[i]+'" '+(K.aR==ba[i]?'selected':'')+'>'+Bu(ba[i])+'</option>')}_.p('</select>');_.p('</td>');_.p('<td width=5></td>');if(J.oj!=5){_.p('<td valign="middle">');_.p('<select onchange="K.changeFutu(this.value)">');_.p('<option value="0" '+(K.dA==0?'selected':'')+'>'+J.ag('One_Indicator')+'</option>');_.p('<option value="1" '+(K.dA==1?'selected':'')+'>'+J.ag('Two_Indicators')+'</option>');_.p('</select>');_.p('</td>');_.p('<td width=5></td>')}_.p('</tr></table>');$T.I(K.menu,$T.au(_))}};K.selected=function(a){K.bX(a);K.Bl();};K.vu=function(a){K.dA= +a;K.resize();};K.vH=function(a,b){K.gJ[a]= !K.gJ[a];if(K.gJ[a]){$T.V(K.AVP[a])}else{$T.H(K.AVP[a])}K.cR();K.ri()};K.rV=function(a){K1.yO=a;if(J.cache['S000001']){if(K1.yO){$T.V(K.hv);pa()}else{$T.H(K.hv,1356)}K.mt()}else{setTimeout("ChangeGw('"+J.gwdm+"')",3000);ChangeGw('S000001');K.rV(K1.yO)}};K.cp=function(a){if(K.gwdm!=J.gwdm||K.line!=a)J.nR(a);LB.aQ('K');};K.eU=function(a){K.style=a;K.resize('K.changeStyle');};K.jq=function(a){var w=R((K.pU()-K.bp)/K.width),z=w*K.width+K.bp,be=K.bN,step=R(M.iV(5,40/K.fL)),map=[036,133,237,338,440,539,634,735],bP;if(a==37){bP=2;if(K.now>K.from){K.now--;}else{K.bN+=step;if(K.start<K.bN)K.bN=K.start;K.now=K.from;if(K.bN!=be)K.resize(1,'KEY left')}}else if(a==39){bP=5;if(K.now<K.from+K.aP-1){if(K.aJ-K.now-1)K.now++}else{K.bN-=step;if(K.bN<0)K.bN=0;K.now=M.kC(K.aJ-1,K.now+step);if(K.bN!=be)K.resize(1,'KEY right')}}else if(a==33){bP=1;if(K.now>K.from){K.now=K.from;}else{K.bN+=R(K.aP/2);if(K.start<K.bN)K.bN=K.start;K.now=K.from;if(K.bN!=be)K.resize(1,'KEY PageUp')}}else if(a==34){bP=6;var right=M.kC(K.aJ-1,K.from+K.aP-1);if(K.now<right){K.now=right}else{K.bN-=R(K.aP/2);if(K.bN<0)K.bN=0;K.now=M.kC(K.aJ-1,K.from+K.aP-1);if(K.bN!=be)K.resize(1,'KEY PageDown')}}else if(a==35){bP=7;K.bN=0;K.now=K.aJ-1;if(K.bN!=be)K.resize(1,'KEY END')}else if(a==36){bP=0;K.bN=K.start;K.now=0;if(K.bN!=be)K.resize(1,'KEY HOME')}else if(a==38||a==107){bP=3;if(K.fL>50)return;K.fL+=K.fL;if(K.fL>.75)K.fL=R(K.fL);K.bN=R(K.start-K.now+K.eO*3/4);if(K.bN!=be)K.resize(1,'KEY +')}else if(a==40||a==109){bP=4;if(K.fL==K.la&&mN())return;K.fL=M.iV(K.la,K.fL/2);K.bN=R(K.start-K.now);if(K.bN!=be)K.resize(1,'KEY -')}K.content.onmouseover();K.iq();K.oE[bP].onmouseover();$T.aC.change('K_button_'+a,K.oE[bP],{y:1},{y:0},'','',function(t,b,c,d,z){var i=$T.aC.inter;if(t<=i){z.oa=10*32/z.duration/z.duration;z.ln= -z.oa*z.duration/4;z.s=z.y1;}if(t<d){z.ln+=z.oa*i;z.s+=z.ln*i+z.oa*(i/2+1)*i;if(z.s>=z.y2){z.ln= -.5*z.ln;z.s=z.y2+z.y2-z.s;}}else{z.s=z.y2;}$T.M(z.aI,{t:z.s});return z.s;});};K.ht=function(a){K.cO=a;if(K.cO){$T.V(K.dI);$T.V(K.er);$T.V(K.hT);$T.V(K.kF);$T.V(K.km);}else{$T.H(K.dI,1436);$T.H(K.er,1437);$T.H(K.kF);$T.H(K.km);$T.H(K.cf,1438);$T.H(K.eL,1439);$T.H(K.hT);}if(K.now==K.aJ-1)K.iq();};K.aS=function(a,b,c){return!$T.aW(c)?J.json[a+'_'+b+'_'+c]||K[a][b][c]:J.json[a+'_'+b]||K[a][b];};K.an=function(a,b,c,d){try{if(!d)d=E(K.line);if(!c||b== -1|| !E().bn){try{return d[a][b]}catch(e){}}else if(d[a][10+b]){return d[a][10+b]}return K.fM(d[a][b],d[a][7],1)}catch(e){}};K.bH=function(a){if($T.aF(a))return;if(K.gI==1){return K.gY-a*K.rate}else{return R(K.gY-M.log(a/K.cz)*K.rate)}};K.wy=function(a){return(K.hx-a)/K.rate+K.cz;};K.Ai=function(a){if($T.aF(a))var a=K.pU();var z=R((a-K.bp)/K.width);z=(z>=K.aP||a== -1)?K.aP-1:((z<0)?0:z);return M.kC(K.aJ-1,z+K.from)};K.sk=function(a){return a-(K.from)};K.uB=function(a){var z=E(K.line)[a];if(!z){return;}var gl=a<=0?0:K.an(a-1,4,K.q),_=[];_.p("<table id='k_info' width='100%' border=0 cellpadding=2 cellspacing=0>");_.p("<tr><td colspan=2 align='center'>",$T.nobr(J.gA(z[0],'week')),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Open'))+"</td><td align='right'>",J.aZ(K.an(a,1,K.q),gl),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('High'))+"</td><td align='right'>",J.aZ(K.an(a,2,K.q),gl),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Low'))+"</td><td align='right'>",J.aZ(K.an(a,3,K.q),gl),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Close'))+"</td><td align='right'>",J.aZ(K.an(a,4,K.q),gl),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Change'))+"</td><td align='right'>",J.du(K.an(a,4,K.q),gl),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Chg'))+"</td><td align='right'>",J.eh(K.an(a,4,K.q),gl)+'%',"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Vol'))+"</td><td align='right' style='color:",C.av('C_volume'),"'>",$T.F(K.an(a,5)/E().dn,-1),"</td></tr>");_.p("<tr><td>"+$T.nobr(J.ag('Amount'))+"</td><td align='right'>",$T.F(z[6],-1),"</td></tr>");if(J.ty>=J.tw&&$T.aN(K.BY)){var pso=K.an(a,20,K.q),color,text;switch(pso){case 1:color='#E61725';text=J.ag('Bid');break;case 2:color='#07EA42';text=J.ag('Ask');break;case 3:color="#DEE608";text=J.ag('wait');break;}if(color){_.p("<tr><td>"+J.ag('action')+"</td><td align='right' style='color:"+color+"' >",text,"</td></tr>");}}if(E().lt){var lt=wi(z[0]);_.p("<tr><td>"+J.ag('Turnover')+"</td><td align='right'>",$T.F(K.an(a,5)/lt*100,2)+'%',"</td></tr>");_.p("<tr><td>"+J.ag('Tradeable')+"</td><td align='right'>",$T.F(lt,-1),"</td></tr>")}$T.I(K.cf,$T.au(_));K.nm(a);};K.ri=function(a){a=a||K.Ai();var _=[];J.vN=1;if(K.bs<400|| !K.cO){$T.H(K.hT,1481);return}var z=K.MAP.data[a],af=a>1?K.MAP.data[a-1]:z,ba=E(K.line)[a][7],aw=a>1?E(K.line)[a-1][7]:ba;_.p('<table border="0"><tr>');for(var i=0;i<K.dM;i++){_.p(ub(i))}_.p('</tr></table>');$T.I(K.hT,$T.au(_));function ub(a){if($T.aN(K.AVP[a])){var cI=C.av('C_kavg'+a),mD=z[a][K.q];return mD>0?'<td width="100"><font style="font-size:11px;color:'+cI+'">MA'+K.aS('AP_A',K.line,a)+':'+$T.bS(mD)+tZ(mD,af[a][K.q])+'</font></td>':''}};function tZ(a,b){return '<font class="signal">'+(a>b?'↑':(a<b?'↓':''))+'</font>'}};K.nm=function(a){if(!K.cO)return;var z=K.size>12.5?K.bs+38+K.size*4:(a>K.from+K.eO/2.1?9:K.bs-K.cf.offsetWidth-6);$T.M(K.cf,{l:z})};K.rz=function(){var ae=M.kC(K.now,K.aJ-1);if($T.aW(ae))return;K.uB(ae);$T.I(K.dI,J.gA(E(K.line)[ae][0]));K.ri(ae);K.uK(ae,K.tp);};K.iq=function(a,b){$T.bU(K.bu);if(!K.aJ)return;if(a){K.now=K.Ai(a);}var z=K.now;a=R(M.kC(K.sk(z),K.aP-1)*K.width+K.bp);$T.aC.change('f_k_cross_v',K.dZ,{},{x:a});if(!K.cO)return;if(!b){b=K.bH(K.an(z,4,K.q));}var qk=M.a(K.bH(K.an(z,1,K.q))-b),qm=M.a(K.bH(K.an(z,2,K.q))-b),ql=M.a(K.bH(K.an(z,3,K.q))-b),qh=M.a(K.bH(K.an(z,4,K.q))-b),jr=M.kC(qk,qm,ql,qh),dg,position=b;if(b<=K.hx){if(jr<20){if(qh==jr){dg=K.an(z,4,K.q);}else if(qk==jr){dg=K.an(z,1,K.q);}else if(qm==jr){dg=K.an(z,2,K.q);}else if(ql==jr){dg=K.an(z,3,K.q);}if(dg)position=K.bH(dg);$T.V(K.eL);$T.aC.change('f_k_showRule',K.eL,{},{y:position-7})}else{dg=K.wy(b);$T.H(K.eL,1568)}var gl=z<=0?0:K.an(z-1,4,K.q);$T.I(K.bY,J.aZ(dg,gl))}else if(b>=K.hx+K.inter&&b<=K.hx+K.inter+K.wb){$T.H(K.eL,1672);}else{$T.H(K.eL,1672);return;}$T.aC.change('f_k_cross_h',K.er,{},{y:position});K.tp=b;K.bu=setTimeout(K.rz,50);};K.kz=function(){K.max=0;K.min=1e8;};K.nN=function(a){if(J.aH.substring(0,1)=='J')return;K.q=a?1:0;K.lD=K.q;K.kz();K.resize('changeQx')};K.fM=function(a,b,c){if((!K.q&& !c)|| !E().bn||b<0||typeof(b)=='undefined')return a;return $T.F(a*E().bn[b][1],E().aO)};K.pe=function(a,b,c){if((!K.q&& !c)|| !E().bn||b<0||typeof(b)=='undefined')return a;try{return $T.F(a/E().bn[b][1],E().aO+1)}catch(e){}};ej=function(a,b,c){if((K.q&& !c)|| !E().bn||b<0||typeof(b)=='undefined')return a;return $T.F(a/E().bn[b][1],E().aO)};uz=function(e,a){var z=B.jL?e.pageX:event.clientX;z-=$T.az(K.div.style.left);$T.M(K.eo,{l:z-20,t:K.hx-110});$T.V(K.eo);var af=E().bn[a],_=[];_.p(af[0],':<br />');_.p(af[2]>'0'?' 分红 '+af[2]+'<br />':'');_.p(af[3]>'0'?' 送股 '+af[3]+'<br />':'');_.p(af[4]>'0'?' 转增 '+af[4]+'<br />':'');_.p(af[5]>'0'?' 配股 '+af[5]+'<br />':'');_.p(af[6]>'0'?' 配股价 '+af[6]+'':'');$T.I(K.eo,$T.au(_))};sP=function(a,b){if(!E(K.line)[b]||(b>=1&& !E(K.line)[b-1]))return '';var z=(b<1)? -1:E(K.line)[b-1][7];if(z!=E(K.line)[b][7]&&z!= -1){return J.bJ(a-7,K.hx-12,'▲',12,C.av('C_gray'),14,'center','','onmouseout="$T.H(K.divqxout,1619)" onmouseover="showqx(event,'+z+')"')}return ''};K.pd=function(){var z,L=K.bp,_=[];if(K.fL<3)z=3/K.fL;else z=1;var ae=K.nA*K.width*z;$T.jR(K.rq,K.bs,K.bv);J.hW(K.rq,0,0,ae,K.iL,K.bs/ae,K.fY,C.av('C_border'),L-ae,0);_=[];$T.jR(K.qU,K.bs,K.bv);J.hW(K.qU,0,0,ae,K.fQ,K.bs/ae,K.ko,C.av('C_border'),L-ae,0);$T.jR(K.ow,K.bs,10);_=[];var af='',aw='',i=K.from;while(L<K.bs&&i<K.aJ){if(E(K.line)[R(i)]){af=''+E(K.line)[R(i)][0];K.ow.aK.bq(C.av('C_dashed')).cc(L,0,1,8);_.p(J.bJ(L+2,3-R(K.dV)+K.dV,J.gA(af,aw),"",C.av('C_text'),ae+ae,"left"));aw=af;}L+=ae+ae;i+=K.nA*2*z}$T.I(K.ra,$T.au(_))};Cp=function(ij){for(var i=0;i<4;i++){ij?$T.V(K.SS[i]):$T.H(K.SS[i])}};K.Ct=function(ij){for(var i=0;i<6;i++){K.gJ[i]=ij;ij?$T.V(K.AVP[i]):$T.H(K.AVP[i])}};BZ=function(ij){for(var i=0;i<4;i++){ij?$T.V(K.SS[i]):$T.H(K.SS[i])}};K.bX=function(a){LB.aQ('K');var BE=K.BW;K.BW=a;K.pd();if(a=='boll'){BZ(false);Cp(false);K.Ct(false);if(K.mK= !K.mK){oZ();K.nk=0;}K.pI=false;K.dB=false;K.sR=false;K.nk=false;K.cR();}else if(a=='zxmb'){BZ(false);Cp(false);K.Ct(false);if(K.nk= !K.nk){mP();K.mK=0;}K.cR();K.pI=false;K.dB=false;K.sR=false;K.mK=false;}else if(a=='xfgj'){$T.hB(K.hq);K.pI= !K.pI;if(K.pI){BZ(false);K.Ct(false);mL();}K.pI=true;Cp(K.pI);K.cR();K.sR=false;K.dB=false;K.nk=false;K.mK=false;}else if(a=='xstd'){$T.hB(K.hq);K.sR= !K.sR;if(K.sR){Cp(false);K.Ct(false);mO();}K.sR=true;BZ(K.sR);K.cR();K.pI=false;K.dB=false;K.nk=false;K.mK=false;}else if(a=='S000001'){K.rV(!K1.yO);K.cR()}else if(a=='ma'){$T.hB(K.hq);K.dB= !K.dB;BZ(false);Cp(false);K.Ct(K.dB);K.cR();K.pI=false;K.sR=false;K.nk=false;K.mK=false;}else if(a=='mv'){K.jS= !K.jS;if(K.jS){K.sp()}else{$T.hB(K.op)}K.cR()}else{K.BW=BE;K.BN=a;K.lx=a;K.lD=K.q;K.aR=a;K.resize();}};K.vt=function(a,b){$T.hB(K.hq);$T.I(K.qT);if(K.mK)oZ();else if(K.nk)mP();else if(K.pI)mL();else if(K.sR)mO();if(a=="volume"){$T.V(K.volume);$T.H(K.fC);K.sz()}else{if(!K.dA)$T.H(K.volume);else $T.V(K.volume);$T.V(K.fC);if(a=="macd"){un()}else if(a=="rsi"){rJ()}else if(a=="kdj"){sQ()}else if(a=="wr"){tJ()}else if(a=="psy"){va()}else if(a=="cci"){tY()}else if(a=="bias"){AK()}else if(a=="dma"){yI()}else if(a=="obv"){uZ()}else if(a=="trix"){sB()}else if(a=="brar"){sa()}else if(a=="dmi"){uw()}else if(a=="cr"){ur()}else if(a=="vr"){tj()}else if(a=="asi"){ud()}else if(a=="emv"){um()}else if(a=="roc"){yE()}else if(a=="mtm"){uO()}else if(a=="sar"){wC()}else if(a=="boll"){oZ()}else if(a=="mcst"){uQ()}}};K.uK=function(a,b){var _=[],z,y,af,ae,L,ba,aE,dX;J.vN=1;aE=b-K.hx-J.inter-1;if(aE>=0&&aE<=K.wb){if(K.dA){if(aE<=K.dq){dX=1;aE=K.dq-aE;}else{dX=2;aE=K.wb-aE;}}else{if(K.aR=='volume'){dX=1;aE=K.dq-aE;}else{dX=2;aE=K.wb-aE;}}}if(K.bs<400||(!K.cO)){$T.H(K.km);$T.H(K.kF);return}else{if(K.dA||K.aR=="volume"){y=K.iJ(a);if(!E(K.line))return;af=a>1?a-1:a;ae=K.an(a,4,K.q)<K.an(af,4,K.q)?C.av('C_bardown'):(K.an(a,4,K.q)>K.an(af,4,K.q)?C.av('C_barup'):C.av('C_gray'));_.p('<table class="ind_info_table" border="0"><tr>');_.p($T.td('Volume:<font style="color:'+ae+'">'+$T.F(K.an(a,5)/E().dn,-1)+'</font>','width=100'));if(a==K.aJ-1&&K.fl){_.p($T.td('/预估:<font style="color:'+ae+'">'+$T.F(K.fl/E().dn,-1)+'</font>','width=100'))}if(!y)return;af=K.iJ(af);for(var i=0;i<3;i++){_.p($T.td('<font style="color:'+C.av('C_kavg'+i)+'">VMA'+K.aS('AV',i)+':'+$T.F(y[i]/E().dn,-1)+qN(y[i],af[i])+'</font>','width=100'))}_.p('</tr></table>');if(dX==1)$T.I(K.bY,$T.nobr($T.F(aE/K.aE/E().dn,-1)));$T.I(K.kF,$T.au(_));}_=[];_.p('<table class="ind_info_table" border="0"><tr>');if(K.aR=="macd"){if(K.size>1.5){af=$T.aF(K.MACD.data[a])?['','','','']:K.MACD.data[a];_.p('<td width="100"><font style="color:',C.av('C_barup'),'">MACD(',K.aS('MACD','V1'),',',K.aS('MACD','V2'),',',K.aS('MACD','V3'),')</font></td>');_.p('<td width="80"><font style="color:',C.av('C_kavg0'),'">DIF: ',$T.F(af[0]),'</font></td>');_.p('<td width="85"><font style="color:',C.av('C_kavg2'),'">DEA: ',$T.F(af[1]),'</font></td>');_.p('<td width="90">MACD: ',$T.F(af[0]+af[0]-af[1]-af[1]),'</td>');if(dX==2&&K.ie)$T.I(K.bY,$T.F((aE-K.bv/2)/K.ie))}}else if(K.aR=="rsi"){af=$T.aF(K.RSI.data[a])?['','','','']:K.RSI.data[a];_.p('<td width="50"><font style="color:',C.av('C_kavg0'),'">RSI(',K.aS('RSI','V1'),')</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg0'),'">',af[1],'</font></td>');_.p('<td width="50"><font style="color:',C.av('C_kavg2'),'">RSI(',K.aS('RSI','V2'),')</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg2'),'">',af[2],'</font></td>');if(dX==2&&K.RSI.aE)$T.I(K.bY,$T.F(aE/K.RSI.aE-5))}else if(K.aR=="kdj"){af=$T.aF(K.KDJ.data[a])?['','','','']:K.KDJ.data[a];_.p('<td width="100"><font style="color:',C.av('C_barup'),'">KDJ(',K.aS('KDJ','V1'),',',K.aS('KDJ','V2'),',',K.aS('KDJ','V3'),')</font></td>');_.p('<td width="80"><font style="color:',C.av('C_kavg0'),'">K: ',$T.F(af[1]),'</font></td>');_.p('<td width="85"><font style="color:',C.av('C_kavg1'),'">D: ',$T.F(af[2]),'</font></td>');_.p('<td width="90"><font style="color:',C.av('C_kavg2'),'">J: ',$T.F(af[3]),'</font></td>');if(dX==2&&K.KDJ.aE)$T.I(K.bY,$T.F(aE/K.KDJ.aE-K.KDJ._blank))}else if(K.aR=="wr"){if(K.WR.data[a]){af=K.WR.data[a];_.p('<td>W%R(',K.aS('WR','V1'),'): &nbsp;',$T.F(af[0]),'</td>');}if(dX==2&&K.WR.aE)$T.I(K.bY,$T.F(aE/K.WR.aE-K.WR._blank))}else if(K.aR=="psy"){af=$T.aF(K.PSY.data[a])?['','','','']:K.PSY.data[a];_.p('<td width="50"><font style="color:',C.av('C_kavg0'),'">PSY(6)</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg0'),'">',af[1],'</font></td>');_.p('<td width="50"><font style="color:',C.av('C_kavg2'),'">PSY(12)</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg2'),'">',af[2],'</font></td>');if(dX==2&&K.PSY.aE)$T.I(K.bY,$T.F(aE/K.PSY.aE-K.PSY._blank))}else if(K.aR=="cci"){af=$T.aF(K.CCI.data[a])?['','','','']:K.CCI.data[a];_.p('<td width="50"><font style="color:',C.av('C_kavg0'),'">CCI(',K.aS('CCI','V1'),')</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg0'),'">',(af[2]?af[2]:''),'</font></td>');if(dX==2&&K.CCI.aE)$T.I(K.bY,$T.F((aE-K.bv/2)/K.CCI.aE))}else if(K.aR=="bias"){af=$T.aF(K.BIAS.data[a])?['','','','']:K.BIAS.data[a];_.p('<td width="50"><font style="color:',C.av('C_kavg0'),'">BIAS(',K.aS('BIAS','V1'),K.aS('BIAS','V2'),K.aS('BIAS','V2'),')</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg0'),'">',(af[2]?af[2]:''),'</font></td>');if(dX==2&&K.BIAS.aE)$T.I(K.bY,$T.F((aE-K.bv/2)/K.BIAS.aE));af=$T.aF(K.CCI.data[a])?['','','','']:K.CCI.data[a];_.p('<td width="50"><font style="color:',C.av('C_kavg0'),'">CCI(',K.aS('CCI','V1'),')</font></td>');_.p('<td width="30"><font style="color:',C.av('C_kavg0'),'">',(af[2]?af[2]:''),'</font></td>');if(dX==2&&K.CCI.aE)$T.I(K.bY,$T.F((aE-K.bv/2)/K.CCI.aE))}else if(K.aR=="zxmb"){}else if(K.aR=="xfgj"){}else if(K.aR=="xstd"){}else if(K.aR=="dma"){}else if(K.aR=="obv"){}else if(K.aR=="trix"){}else if(K.aR=="brar"){}else if(K.aR=="dmi"){}else if(K.aR=="cr"){}else if(K.aR=="vr"){}else if(K.aR=="asi"){}else if(K.aR=="emv"){}else if(K.aR=="roc"){}else if(K.aR=="mtm"){}else if(K.aR=="sar"){}else if(K.aR=="mcst"){}_.p('</tr></table>');}$T.I(K.km,$T.au(_));function qN(a,b){return '<font class="signal">'+(a>b?'↑':(a<b?'↓':''))+'</font>'}};Bu=function(a){switch(a){case "S000001":return J.ag('S000001');case "ma":return J.ag('MA');case "mv":return J.ag('MV');case "volume":return J.ag('VOLUME');case "zxmb":return J.ag('ZXMB');case "xfgj":return J.ag('XFGJ');case "xstd":return J.ag('XSTD');case "dma":return J.ag('DMA');case "obv":return J.ag('OBV');case "trix":return J.ag('TRIX');case "brar":return J.ag('BRAR');case "dmi":return J.ag('DMI');case "cr":return J.ag('CR');case "vr":return J.ag('VR');case "asi":return J.ag('ASI');case "emv":return J.ag('EMV');case "roc":return J.ag('ROC');case "mtm":return J.ag('MTM');case "sar":return J.ag('SAR');case "mcst":return J.ag('MCST');case "boll":return J.ag("BOLL");default:return a.toUpperCase()}};K.sz=function(){var _=[],af=K.oM,ae=K.bs+2,ba=0,aK=K.rr.aK.i();K.aE=K.iL/af;if(K.lM){K.dj(aK,E(K.line),5,'',K.dq,0,K.aE,C.av('C_linechart'));return}K.sA((K.to-1-K.from)*K.width+K.bp,K.to-1,aK);if(K.change){for(var i=0;i<K.fY&&af>1;i++){_.p(J.bJ(ae,(K.fY-i-1)*K.iL-(i==K.fY-1?4:9),$T.nobr($T.F((ba+=af)/E().dn,-1)),"",C.av('C_volume'),'',"left"));}$T.I(K.ug,$T.au(_));var L=K.bp,aK=K.rA.aK.i();for(var i=K.from;i<K.to+K.step-2;i+=K.step){if(i>K.to-2){i=K.to-2;L=K.bp+K.width*(i-K.from)}K.sA(L,i,aK);L+=K.cT}if(K.jS)K.sp();}};K.sA=function(a,b,aK){var z=E(K.line)[b];if(!z)return;var af=b>0&&E(K.line)[b-1]?b-1:b;var pk=K.fL+K.fL+(K.fL>=1?1:0);if(b==K.aJ-1&&K.fl){aK.eE(C.av('C_gray'));var h=R(K.fl*K.aE);J.kN(aK,a-K.fL,K.dq-h-1,pk,h)}if(K.an(b,4,1)<K.an(af,4,1)||(b==0&&K.an(b,4,1)<K.an(b,1,1))){var ae=C.av('C_bardown_v')}else if(K.an(b,4,1)>K.an(af,4,1)||(b==0&&K.an(b,4,1)>K.an(b,1,1))){var ae=C.av('C_barup_v')}else{var ae=C.av('C_gray')}aK.bq(ae);var h=M.cl(K.an(b,5)*K.aE);J.cJ(aK,M.iV(0,a-K.fL),M.iV(0,K.dq-h),pk,h,'k2044');if(J.ea)aK.s();};K.tU=function(){var data=K.sm(),_=[];for(var i=0;i<K.dM;i++){if(!K.aJ)break;if(!B.by||B.dk||K.AP_A[K.line][i]*K.fL>2){var aK=K.lJ[i].aK.i();K.lL(aK,function(j){return K.bH(data[j][i][K.q])},C.av('C_kavg'+i),1);}var z=K.aJ-K.aS('AP_A',K.line,i);(z>=K.from&&z<K.to+K.step-1)&&_.p(J.bJ(K.bp+K.width*(z-K.from)-10,K.hx-10,"<font class='shift6'>^</font>",'',C.av('C_kavg'+i),21,'center'))}for(var i=0;i<K.dM;i++){if(!K.gJ[i])$T.H(K.AVP[i],1153);else $T.V(K.AVP[i])}for(var i=K.dM;i<6;i++){$T.H(K.AVP[i],1157)}$T.I(K.tI,$T.au(_));};K.sm=function(){return K.MAP.data;};K.sp=function(){var data=K.iJ(),aK=K.op.aK.i();if(typeof(E(K.line)[K.from])=='undefined'||(B.by&& !B.dk&&K.lM)){return;}if(K.aJ){for(i=0;i<3;i++){K.dj(aK,data,i,'',K.dq,0,K.aE,C.av('C_kavg'+i));}}};K.iJ=function(a){if($T.aF(K.MAV.data)){K.mp=$T.ao(K.AV);var z=[],y,ah=K.mp,data=[],aM=[],i=0,j=K.aJ;for(var k=0;k<ah;k++){aM[k]=K.aS('AV',k);}while(i<j){y=[];for(var k=0;k<ah;k++){if(i==0){z[k]=0;}if(i>=aM[k])z[k]-=K.an(i-aM[k],5);z[k]+=K.an(i,5);y.p(i>=aM[k]?R(z[k]/aM[k]):'');}if(i==j-2){K.ba=z;}data[i]=y;i++;}K.MAV.data=data;}return $T.aW(a)?K.MAV.data:K.MAV.data[a];};un=function(){var af,ae,L,ba,aw,h,nv=K.aS('MACD','V1'),nB=K.aS('MACD','V2'),hj=K.aS('MACD','V3'),aX=0,data=vO(),aK=K.dS.aK.i(),m=R(K.bv/2);if(!$T.ao(data))return;for(var i=K.from+1;i<K.to;i+=K.step){if(!data[i])continue;af=data[i];if(i>=1)aX=M.iV(aX,M.a(af[0]),M.a(af[1]),2*M.a(af[0]-af[1]))}if(!aX)return;K.ie=K.bv/aX/2.1;L=K.bp;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(i>=1&&data[i]){h=R(M.a((data[i][0]-data[i][1])*(K.ie+K.ie)));if(data[i][1]<data[i][0]){aK.bq(C.av('C_barup_v'));J.cJ(aK,L-K.fL,m-h,K.fL*2+1,h,'K2140')}else{aK.bq(C.av('C_bardown_v'));J.cJ(aK,L-K.fL,m,K.fL*2+1,h,'K2143')}}L+=K.cT}K.dj(aK,data,'0','',m,0,K.ie,C.av('C_kavg0'));K.dj(aK,data,'1','',m,0,K.ie,C.av('C_kavg2'));};vO=function(){if($T.aF(K.MACD.data)){var c,data=[],nv=K.aS('MACD','V1'),nB=K.aS('MACD','V2'),hj=K.aS('MACD','V3'),kX=0,kA=0,jj=0,kc=0,eF=[],i=0,j=K.aJ;while(i<j){c=K.an(i,4,1);if(i<1){kX=c}else{kX=(kX*(nv-1)+c+c)/(nv+1)}if(i<1){kA=c}else{kA=(kA*(nB-1)+c+c)/(nB+1)}if(i<1){jj=0}else{jj=kX-kA}if(i<1){kc=0}else{kc=(kc*(hj-1)+jj+jj)/(hj+1)}if(i>=1)data[i]=[$T.F(jj,5),$T.F(kc,5)];i++}K.MACD.data=data}return K.MACD.data};rJ=function(){var data=wD();if(!$T.ao(data))return;var ca=10;var rate=K.bv/(100+ca+ca);K.RSI.aE=rate;K.RSI._blank=ca;var aK=K.dS.aK.i();K.dj(aK,data,'1','',K.bv,-ca,rate,C.av('C_kavg0'));K.dj(aK,data,'2','',K.bv,-ca,rate,C.av('C_kavg2'));};wD=function(){if($T.aF(K.RSI.data)){var c,d,ir=K.aS('RSI','V1'),fk=K.aS('RSI','V2'),i=1,j=K.aJ,lE=0,lG=0,na=0,md=0,data=[];while(i<j){c=K.an(i,4,1)-K.an(i-1,4,1);if(c>0){lE+=c;lG+=c}else{na-=c;md-=c}if(i>ir){d=data[i-ir][0];if(d>0)lE-=d;else na+=d}if(i>fk){d=data[i-fk][0];if(d>0)lG-=d;else md+=d}data[i]=[c,$T.F(100*lE/(lE+na)),$T.F(100*lG/(lG+md))];i++}K.RSI.data=data;}return K.RSI.data;};sQ=function(){var data=vZ();if(!$T.ao(data))return;var ca=10,rate=K.bv/(100+ca+ca);K.KDJ.aE=rate;K.KDJ._blank=ca;var aK=K.dS.aK.i();K.dj(aK,data,'1','',K.bv,-ca,rate,C.av('C_kavg0'));K.dj(aK,data,'2','',K.bv,-ca,rate,C.av('C_kavg1'));K.dj(aK,data,'3','',K.bv,-ca,rate,C.av('C_kavg2'));};vZ=function(){if($T.aF(K.KDJ.data)){var z,af,ae,L,ba,aw,cI,aT=K.aS('KDJ','V1'),eT=K.aS('KDJ','V2'),eV=K.aS('KDJ','V3'),fk=45,i=aT,j=K.aJ,aX=0,bF=999999,ha,gh,fA,mB,k,dR,ct,data=[],pq=0,mq,m,jy,jh,he,kT=null,gg,jZ,jO= -1,nt= -1,kZ= -1,lu= -1;while(i<j){if(K.an(i-aT,2,1)>=aX){aX=0;for(var k=i-aT+1;k<=i;k++){aX=M.iV(aX,K.an(k,2,1))}}else{aX=M.iV(aX,K.an(i,2,1))}if(K.an(i-aT,3,1)<=bF){bF=99999;for(var k=i-aT+1;k<=i;k++){bF=M.kC(bF,K.an(k,3,1))}}else{bF=M.kC(bF,K.an(i,3,1))}cI=K.an(i,4,1);if(aX>bF)ha=$T.F(100*(cI-bF)/(aX-bF));if(i==aT){gh=ha;fA=gh}else{gh=gh*(eT-1)/eT+ha/eT;fA=fA*(eV-1)/eV+gh/eV}mB=$T.F(M.iV(0,M.kC(100,3*gh-2*fA)));if(i>=fk){mq=J.nY(E(K.line)[i][0]);jh=0;he=99999;m=0;for(var k=i;k>=i-fk;k--){if(m<aT){jh=M.iV(jh,K.an(k,2,1));he=M.kC(he,K.an(k,3,1))}else break}jy=kT;kT=$T.F(100*(cI-he)/(jh-he));if($T.aF(jy)){jy=kT}if(mq>pq){pq=mq;m++;if(i<fk+eT+eV){gg=jy;jZ=gg;kZ=gg;lu=gg}else{gg=gg*(eT-1)/eT+jy/eT;jZ=jZ*(eV-1)/eV+gg/eV}}jO=gg*(eT-1)/eT+kT/eT;nt=jZ*(eV-1)/eV+jO/eV;kZ=(kZ*2+jO*3)/5;lu=(lu*2+nt*3)/5}data[i]=[ha,$T.F(gh),$T.F(fA),mB,jO,nt,kZ,lu,aX,bF,jh,he,E(K.line)[i][0]];i++}K.KDJ.data=data}return K.KDJ.data};tJ=function(){var data=wp();if(!$T.ao(data))return;var ca=10,rate=K.bv/(100+ca+ca),aK=K.dS.aK.i();K.WR.aE=rate;K.WR._blank=ca;K.dj(aK,data,'0','',K.bv,-ca,rate,C.av('C_kavg0'));};wp=function(){if($T.aF(K.WR.data)){var aT=K.aS('WR','V1'),i=aT,j=K.aJ,aX=0,bF=999999,ha,gh,fA,mB,k,dR,ct,data=[];while(i<j){if(K.an(i-aT,2,1)>=aX){aX=0;for(var k=i-aT+1;k<=i;k++){aX=M.iV(aX,K.an(k,2,1))}}else{aX=M.iV(aX,K.an(i,2,1))}if(K.an(i-aT,3,1)<=bF){bF=99999;for(var k=i-aT+1;k<=i;k++){bF=M.kC(bF,K.an(k,3,1))}}else{bF=M.kC(bF,K.an(i,3,1))}ha=$T.F(100*(aX-K.an(i,4,1))/(aX-bF));data[i]=[ha];i++}K.WR.data=data;}return K.WR.data};va=function(){var data=vK();if(!$T.ao(data))return;var ca=10,rate=K.bv/(100+ca+ca),aK=K.dS.aK.i();K.dj(aK,data,'1','',K.bv,-ca,rate,C.av('C_kavg0'));K.dj(aK,data,'2','',K.bv,-ca,rate,C.av('C_kavg2'));};vK=function(){if($T.aF(K.PSY.data)){var z,af,ae,L,ba,aw,c;var ir=K.aS('PSY','V1');var fk=K.aS('PSY','V2');var i=1;var j=K.aJ;var mz=0;var mj=0;var data=[];while(i<j){c=K.an(i,4,1)>K.an(i-1,4,1)?1:0;mz+=c;mj+=c;if(i>ir)mz-=data[i-ir][0];if(i>fk)mj-=data[i-fk][0];data[i]=[c,$T.F(100*mz/ir),$T.F(100*mj/fk)];i++}K.PSY.data=data;}return K.PSY.data};tY=function(){var data=vB();if(!$T.ao(data))return;var rate=K.bv/400;var aK=K.dS.aK.i();K.dj(aK,data,'0','',K.bv/2,0,rate,C.av('C_kavg0'));};vB=function(){if($T.aF(K.CCI.data)){var aT=K.aS('CCI','V1');var jH;var nq=0;var a;var hw=null;var b=0;var pP=null;var i=0;var j=K.aJ;var data=[];while(i<j){jH=(K.an(i,2,1)+K.an(i,3,1)+K.an(i,4,1))/3;nq+=jH;if(i>=aT){nq-=data[i-aT][1];a=nq/aT;hw=M.a(jH-a)/aT;b+=hw;if(i>=aT+aT){b-=data[i-aT][2];pP=$T.oz(-160,160,$T.F((jH-a)/(0.015*b),1))}}data[i]=[pP,jH,hw];i++}K.CCI.data=data;}return K.CCI.data};AK=function(){var data=wN();if(!$T.ao(data))return;var rate=K.bv/400,aK=K.dS.aK.i();K.BIAS.aE=rate;K.dj(aK,data,'2','',K.bv/2,0,rate,C.av('C_kavg0'));};wN=function(){};oZ=function(){var data=wL();if(!$T.ao(data))return;var aK=K.hq.aK.i(),L=K.bp,first=true,iu;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){if(first){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);first=0;}ae=ej(data[i][0]*1-data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);if(i==K.to-1){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);break;}}L+=K.cT;iu=i;}for(var i=iu+K.step;i>K.from-K.step;i-=K.step){if(i<K.from){i=K.from;L=K.bp}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1)}L-=K.cT}aK.c().f(C.av('C_boll'));return;var L=K.bp,ae=null,ba=null;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1-data[i][1]*2,E(K.line)[i][7]);if((!$T.aF(ae)&&$T.aF(ba))||(E().bn&&E(K.line)[i-1][7]!=E(K.line)[i][7])){aK.m(L-.5,K.bH(ae)-1)}else if((!$T.aF(ae)&& !$T.aF(ba))&&(!E().bn||E(K.line)[i-1][7]==E(K.line)[i][7])){aK.l(L-.5,K.bH(ae)-1)}ba=ae}L+=K.cT}L=K.bp;ae=null;ba=null;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);if((!$T.aF(ae)&&$T.aF(ba))||(E().bn&&E(K.line)[i-1][7]!=E(K.line)[i][7])){aK.m(L-.5,K.bH(ae)-1)}else if((!$T.aF(ae)&& !$T.aF(ba))&&(!E().bn||E(K.line)[i-1][7]==E(K.line)[i][7])){aK.l(L-.5,K.bH(ae)-1)}ba=ae}L+=K.cT}aK.s(C.av('C_linechart'))};wL=function(){if($T.aF(K.BOLL.data)){var aO= +E().aO+1,aT=K.aS('BOLL','V1'),eF=0,gZ=0,i=0,j=K.aJ,data=[];while(i<j){eF+=K.an(i,4,1)/aT;if(i>=aT){eF-=K.an(i-aT,4,1)/aT;gZ=0;for(var k=0;k<aT;k++){gZ+=M.p(K.an(i-k,4,1)-eF,2)}}data[i]=[$T.F(eF,aO),$T.F(M.sqrt(gZ/aT),aO)];i++}K.BOLL.data=data;}return K.BOLL.data};bM=function(n,p,type){var i=1,j=K.aJ,bE=[],data=[],sum=[],dg,current,prev,nj,ja,oe;if(typeof p=='number')ja=K.an;else if(p instanceof Array){ja=function(index){return p[index];};j=p.length;}if(n instanceof Array)bE=n;else if(typeof n=='number')bE.push(n);switch(type){case "SUM":nj=1;case "PMA":i=0;for(var z=0;z<bE.length;z++){sum[z]=0;data[z]=[];}oe=function(){for(var z=0;z<bE.length;z++){sum[z]+=dg;if(i>bE[z]-1){sum[z]-=ja(i-bE[z],p,1);data[z].push(sum[z]/(nj||bE[z]));}else if(i<bE[z]-1)data[z].push(null);else data[z].push(sum[z]/(nj||bE[z]));}};break;case "EMA":default:i=1;dg=ja(0,p,1)||0;for(var z=0;z<bE.length;z++)data.push([dg]);oe=function(){for(var z=0;z<bE.length;z++){current=dg*2;prev=data[z][i-1]*(bE[z]-1);data[z].push((current+prev)/(bE[z]+1));}};break;}while(i<j){dg=ja(i,p,1)||00;oe();i++;}return data;};pH=function(n,data){var ah=arguments.length-1,x=null;if(ah==1){x=data.concat();for(var i=0;i<n;i++)x[i]=null;}else if(ah>1){x=[];for(var j=1;j<=ah;j++){x.push(arguments[j].concat());for(var i=0;i<n;i++){x[j-1][i]=null;}}}return x;};wU=function(data,cv,ah,qX){var sum=0;for(var i=cv;i<ah;i++)sum+=data[i];if(qX)sum/=qX;return sum;};bL=function(dataList){var data=[],count=dataList[0].length||0,ah=dataList.length||0;for(var i=0;i<count;i++){data[i]=[];for(var j=0;j<ah;j++)data[i].push(dataList[j][i]);}return data;};var BJ=new $T.ajax('syc');K.BG=function(){var canvas=K.BY,aK=canvas.aK.i();if(J.ty<J.tw|| !$T.aN(canvas)){return;}if(K.fL<1){aK.vw().ts('15px Arial').bq('red').Ei("超出范围",canvas.width/2-20,0).yX();return;}var result=CL();if(!result){return;}var i=K.from,ah=K.to+K.step-1,data=E(K.line),L=K.bp,height=canvas.height,width=(K.fL+K.fL+1),y=height/2,r=width>height?height/2:width/2,item,color,x,CK,BX;for(;i<ah;i+=K.step){switch(data[i][20]){case 1:color=[[0,$T.aA("#f5f5f5",1)],[0.5,'#E61725'],[1,'#C70412']];break;case 2:color=[[0,$T.aA("#f5f5f5",1)],[0.5,'#07EA42'],[1,'#05C036']];break;case 3:color=[[0,$T.aA("#f5f5f5",1)],[0.5,"#DEE608"],[1,'#BFC605']];break;default:color=null;}x=L-K.fL+width/2;if(color){CK=x-r/3;BX=y-r/3;aK.b().vw().eJ(CK,BX,0,CK,BX,r+r/3,color).a(x,y,r,0,PI*2,false).f().yX().c();}L+=K.cT;}};CL=function(aP){var qY=E(),data=qY[K.line],from=data[K.from],to=data[K.to-1],date=to[0],aP=0,i=K.from,j=K.from,ah=K.to,item,pso;if(date==qY.jw){ah-=1;}if(!from[20]){for(;i<ah;i++){item=data[i];if(item[20]){date=item[0];break;}}pso=CG(date,i-K.from);if($T.ao(pso)){for(;j<i;j++){data[j][20]=pso.splice(0,1)[0];}}else{return false;}}return true;};CG=function(date,aP){var url='PSO.php',CE=K.gwdm.slice(0,1),code=K.gwdm.slice(1,7),type='',Cr='',data=[];switch(K.line){case 'D':type='PSO_DAYK/';break;case 'W':type='PSO_WEEKK/';break;}switch(CE){case 'S':CE='1';break;case 'Z':CE='2';break;}Cr='type='+type+'&limit='+aP+'&sort=TRADEDATE%20desc'+'&filter-MARKETTYPE-int='+CE+'&filter-STOCKCODE-str='+code+'&filter-TRADEDATE-lte-int='+date;BJ.rS(url,function(vW){try{vW=eval(vW.split("=")[1]).reverse();}catch(e){vW=[];}for(var i=0,ah=vW.length;i<ah;i++){data.push(vW[i].RESULT);}},Cr,'post');return data;};mP=function(){var data=wt();if(!$T.ao(data))return;var aK=K.hq.aK.i(),L=K.bp,first=true,iu;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){if(first){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);first=0;}ae=ej(data[i][0]*1-data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);if(i==K.to-1){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1);break;}}L+=K.cT;iu=i;}for(var i=iu+K.step;i>K.from-K.step;i-=K.step){if(i<K.from){i=K.from;L=K.bp}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);aK.l(L-.5,K.bH(ae)-1)}L-=K.cT}aK.c().f(C.av('C_boll'));return;var L=K.bp,ae=null,ba=null;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1-data[i][1]*2,E(K.line)[i][7]);if((!$T.aF(ae)&&$T.aF(ba))||(E().bn&&E(K.line)[i-1][7]!=E(K.line)[i][7])){aK.m(L-.5,K.bH(ae)-1)}else if((!$T.aF(ae)&& !$T.aF(ba))&&(!E().bn||E(K.line)[i-1][7]==E(K.line)[i][7])){aK.l(L-.5,K.bH(ae)-1)}ba=ae}L+=K.cT}L=K.bp;ae=null;ba=null;for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(!data[i])continue;if(i>=K.aS('BOLL','V1')){ae=ej(data[i][0]*1+data[i][1]*2,E(K.line)[i][7]);if((!$T.aF(ae)&&$T.aF(ba))||(E().bn&&E(K.line)[i-1][7]!=E(K.line)[i][7])){aK.m(L-.5,K.bH(ae)-1)}else if((!$T.aF(ae)&& !$T.aF(ba))&&(!E().bn||E(K.line)[i-1][7]==E(K.line)[i][7])){aK.l(L-.5,K.bH(ae)-1)}ba=ae}L+=K.cT}aK.s(C.av('C_linechart'))};wt=function(){if($T.aF(K.ZXMB.data)){var aO= +E().aO+1,aT=30,eF=0,gZ=0,i=0,j=K.aJ,data=[];while(i<j){eF+=K.an(i,4,1)/aT;if(i>=aT){eF-=K.an(i-aT,4,1)/aT;gZ=0;for(var k=0;k<aT;k++){gZ+=M.p(K.an(i-k,4,1)-eF,2)}}data[i]=[$T.F(eF,aO),$T.F(M.sqrt(gZ/aT),aO)];i++}K.ZXMB.data=data;}return K.ZXMB.data};mL=function(){var data=[];var fB=ww({l1:30,fU:3,zs:30,il:3,gL:15,gK:3,gC:15,gB:3});var ah=fB[0].length,item;var aP=fB.length;for(var i=0;i<ah;i++){data[i]=[];for(var j=0;j<aP;j++){item=fB[j][i];data[i][j]=[item,item];}}var _=[];for(var i=0;i<aP;i++){if(!K.aJ)break;if(!B.by||B.dk||K.AP_A[K.line][i]*K.fL>2){var aK=K.CQ[i].aK.i();K.lL(aK,function(j){return K.bH(data[j][i][K.q])},C.av('C_kavg'+i),1);}}};ww=function(aI){if($T.aF(K.XFGJ.data)){var zb=bM(aI.l1,2,"EMA")[0],zp=bM(aI.fU,3,"EMA")[0],zd=bM(aI.zs,2,"EMA")[0],Ap=bM(aI.il,3,"EMA")[0],ah=zb.length,i=0,gL=1+(aI.gL||15)/100,gK=1+(aI.gK||3)/100,gC=1-(aI.gC||15)/100,gB=1-(aI.gB||3)/100;while(i<ah){zb[i]=zb[i]*gL;zp[i]=zp[i]*gK;zd[i]=zd[i]*gC;Ap[i]=Ap[i]*gB;i++;}K.XFGJ.data=[zb,zp,zd,Ap];}return K.XFGJ.data;};mO=function(){var data=[];var fB=wB({L1:5,S1:5,L2:5,S2:5,l1:10,fU:10,zs:5,il:5,gL:12,gK:14,gC:4,gB:6});var ah=fB[0].length,item;for(var i=0;i<ah;i++){data[i]=[];for(var j=0;j<fB.length;j++){item=fB[j][i];data[i][j]=[item,item];}}var _=[];var aP=fB.length;for(var i=0;i<aP;i++){if(!K.aJ)break;if(!B.by||B.dk||K.AP_A[K.line][i]*K.fL>2){var aK=K.CQ[i].aK.i();K.lL(aK,function(j){return K.bH(data[j][i][K.q])},C.av('C_kavg'+i),1);}}};wB=function(aI){if($T.aF(K.XSTD.data)){var zb=bM(aI.L1||5,bM(aI.l1,2,"EMA")[0],"EMA")[0],zp=bM(aI.S1||5,bM(aI.fU,3,"EMA")[0],"EMA")[0],zd=bM(aI.L2||5,bM(aI.zs,2,"EMA")[0],"EMA")[0],Ap=bM(aI.S2||5,bM(aI.il,3,"EMA")[0],"EMA")[0],ah=zb.length,i=0,gL=1+(aI.gL||12)/100,gK=1-(aI.gK||14)/100,gC=1+(aI.gC||4)/100,gB=1-(aI.gB||6)/100;while(i<ah){zb[i]=zb[i]*gL;zp[i]=zp[i]*gK;zd[i]=zd[i]*gC;Ap[i]=Ap[i]*gB;i++;}K.XSTD.data=[zb,zp,zd,Ap];}return K.XSTD.data;};eR=function(a){var data;if(a=='DMA'){data=vd(10,50)}else if(a=='OBV'){data=vX()}else if(a=='TRIX'){data=wr(12,9)}else if(a=='BRAR'){data=vA(26)}else if(a=='CR'){data=vg(26,10,20,40,62)}else if(a=='VR'){data=wJ(24)}else if(a=='ASI'){data=wq()}else if(a=='EMV'){data=vL(14,9)}else if(a=='ROC'){data=wl(12)}else if(a=='MTM'){data=vU(12,6)}var aX=data[K.from+1][0],bF=aX,item,p=0;if(!$T.ao(data))return;for(var i=K.from+1;i<K.to;i+=K.step){if(!data[i])continue;for(var j=0;j<data[i].length;j++){item=data[i][j];if(i>=1)aX=M.iV(aX,item);if(i>=1)bF=M.kC(bF,item);}}p=M.a(aX-bF)/K.bv*5;bF-=p;aX+=p;var zoom=aX-bF,rate=K.bv/(zoom),aK=K.dS.aK.i();for(i=0;i<data[0].length;i++)K.dj(aK,data,i.toString(),'',K.bv,bF,rate,C.av('C_kavg'+i));};yI=function(){eR('DMA')};vd=function(n,m){if($T.aF(K.DMA.data)){var DMA=[],MAN=[],MAM=[],AMA,PMA,sum=0,item,ah;n=M.kC(n,99);n=M.iV(n,3);m=M.kC(m,99);m=M.iV(m,3);n=n||10;m=m||50;PMA=bM([n,m],4,"PMA");MAN=PMA[0];MAM=PMA[1];ah=MAN.length;for(var i=0;i<ah;i++)DMA.push(MAN[i]-MAM[i]);DMA=pH(m-1,DMA);AMA=bM(n,DMA,"PMA")[0];AMA=pH(m+n-2,AMA);K.DMA.data=bL([DMA,AMA]);;}return K.DMA.data;};uZ=function(){eR('OBV')};vX=function(){if($T.aF(K.OBV.data)){var i=1,j=K.aJ,OBV=[[0]],item,max=0;while(i<j){item=K.an(i,6,1);if(K.an(i,4,1)>K.an(i-1,4,1))OBV[i]=[(OBV[i-1][0]+item/10000)];else if(K.an(i,4,1)<K.an(i-1,4,1))OBV[i]=[(OBV[i-1][0]-item/10000)];else OBV[i]=[OBV[i-1][0]];i++;}i=0;while(i<j){OBV[i][0]/=100;i++;}OBV[0][0]=null;K.OBV.data=OBV;}return K.OBV.data;};sB=function(){eR('TRIX');};wr=function(n,m){if($T.aF(K.TRIX.data)){var AG,Av,wR,CP;n=M.kC(n,99);n=M.iV(n,3);m=M.kC(m,99);m=M.iV(m,3);n=n||12;m=m||9;AG=bM(n,4,'EMA')[0];Av=bM(n,AG.slice(1,AG.length),'EMA')[0];Av.splice(0,0,0);wR=bM(n,Av.slice(2,AG.length),'EMA')[0];wR.splice(0,0,0,0);CP=bM(m,wR,'PMA')[0];CP=pH(m+2,CP);wR[0]=null;wR[1]=null;K.TRIX.data=bL([wR,CP]);}return K.TRIX.data;};sa=function(){eR('BRAR')};vA=function(n){if($T.aF(K.BRAR.data)){var AG=[0],Av=[0],cx=[0],cx=[0],dr=[],ar=[],ai,bi,ci,xS,yZ,o,h,l,c,i=1,j=K.aJ;n=M.kC(n,99);n=M.iV(n,3);n=n||26;while(i<j){h=K.an(i,2,1);c=K.an(i-1,4,1);l=K.an(i,3,1);o=K.an(i,1,1);AG.push(M.iV(h-c,0));Av.push(M.iV(c-l,0));cx.push(h-o);cx.push(o-l);i++;}ai=bM(n-1,AG,'SUM')[0];bi=bM(n-1,Av,'SUM')[0];ci=bM(n-1,cx,'SUM')[0];xS=bM(n-1,cx,'SUM')[0];yZ=pH(n,ai,bi,ci,xS);ai=yZ[0];bi=yZ[1];ci=yZ[2];xS=yZ[3];i=0;while(i<j){dr.push(bi[i]>0?ai[i]/bi[i]*200:0);ar.push(xS[i]>0?ci[i]/xS[i]*200:0);i++;}yZ=pH(n,dr,ar);dr=yZ[0];ar=yZ[1];K.BRAR.data=bL([dr,ar]);}return K.BRAR.data;};uw=function(){var data=vn(14);if(!$T.ao(data))return;var ca=10;var rate=K.bv/(100+ca+ca);K.PSY.aE=rate;K.PSY._blank=ca;var aK=K.dS.aK.i();for(i=0;i<data[0].length;i++)K.dj(aK,data,i.toString(),'',K.bv,-ca,rate,C.av('C_kavg'+i));};vn=function(n){if($T.aF(K.DMI.data)){var TR=[K.an(0,2,1)-K.an(0,3,1)],DM={plus:[0],minus:[0]},NTR,NDM={plus:[],minus:[]},xS={plus:[],minus:[]},cx=[],ADX=[],ADXR=[],yZ,h,l,c,eu,gT,pc,qb,yM,oR,tr,i=1,j=K.aJ;n=M.kC(n,99);n=M.iV(n,3);n=n||14;while(i<j){l=K.an(i,3,1);c=K.an(i,4,1);h=K.an(i,2,1);eu=K.an(i-1,2,1);pc=K.an(i-1,4,1);gT=K.an(i-1,3,1);qb=M.a(l-pc);yM=M.a(h-pc);oR=c-l;tr=M.iV(qb,yM);tr=M.iV(tr,oR);TR.push(tr);DM.plus.push(M.iV(0,h-eu));DM.minus.push(M.iV(0,gT-l));i++;}NTR=bM(n,TR,'SUM')[0];NDM.plus=bM(n,DM.plus,'SUM')[0];NDM.minus=bM(n,DM.minus,'SUM')[0];yZ=pH(n,NTR,NDM.plus,NDM.minus,xS.plus,xS.minus,cx);NTR=yZ[0];NDM.plus=yZ[1];NDM.minus=yZ[2];xS.plus=yZ[3];xS.minus=yZ[4];cx=yZ[5];i=n;while(i<j){if(NTR[i]==0){xS.plus.push(0);xS.minus.push(0);}else{xS.plus.push(NDM.plus[i]/NTR[i]*100);xS.minus.push(NDM.minus[i]/NTR[i]*100);}if(xS.plus[i]+xS.minus[i]==0)cx.push(null);else cx.push(M.a(xS.plus[i]-xS.minus[i])/(xS.plus[i]+xS.minus[i])*100);i++;}i=2*n;ADX=pH(i-1,ADX);ADX[i-1]=wU(cx,n,i,n);while(i<j){ADX.push((ADX[i-1]*(n-1)+cx[i])/n);i++;}i=3*n-2;ADXR=pH(i,ADXR);while(i<j){ADXR.push((ADX[i]+ADX[i-n+1])/2);i++;}K.DMI.data=bL([xS.plus,xS.minus,ADX,ADXR]);}return K.DMI.data;};ur=function(){eR('CR')};vg=function(n,eZ,fF,fE,fJ){if($T.aF(K.CR.data)){var i=1,j=K.aJ,MID=[(K.an(0,4,1)+K.an(0,2,1))/2],c,h,l,AG=[0],Av=[0],ai,bi,CR=[],A,B,C,D,yZ;n=M.kC(n,99);n=M.iV(n,3);n=n||26;eZ=M.kC(eZ,99);eZ=M.iV(eZ,3);eZ=eZ||10;fF=M.kC(fF,99);fF=M.iV(fF,3);fF=fF||20;fE=M.kC(fE,99);fE=M.iV(fE,3);fE=fE||40;fJ=M.kC(fJ,99);fJ=M.iV(fJ,3);fJ=fJ||62;if(M.kC(M.kC(eZ,fF),M.kC(fE,fJ))!=eZ)return;while(i<j){c=K.an(i,4,1);h=K.an(i,2,1);l=K.an(i-1,3,1);MID.push((c+h)/2);AG.push(M.iV(h-MID[i-1],0));Av.push(M.iV(MID[i-1]-l,0));i++;}ai=bM(n-1,AG,'SUM')[0];bi=bM(n-1,Av,'SUM')[0];yZ=pH(n,ai,bi,CR);ai=yZ[0];bi=yZ[1];CR=yZ[2];i=n;while(i<j){CR.push(bi[i]!=0?ai[i]/bi[i]*200:null);i++;}A=bM(eZ,CR,'PMA')[0];A=pH(n+eZ-1,A);B=bM(fF,CR,'PMA')[0];B=pH(n+fF-1,B);C=bM(fE,CR,'PMA')[0];C=pH(n+fE-1,C);D=bM(fJ,CR,'PMA')[0];D=pH(n+fJ-1,D);K.CR.data=bL([CR,A,B,C,D]);}return K.CR.data;};tj=function(){eR('VR')};wJ=function(n){if($T.aF(K.VR.data)){var i=0,j=K.aJ,up=[],CN=[],down=[],AQ=[],o,c,v,yZ,oA=oD=kY=0,Bz=[],Co=[],Cs=[];n=M.kC(n,99);n=M.iV(n,3);n=n||24;while(i<j){o=K.an(i,1,1);c=K.an(i,4,1);v=K.an(i,5,1);if(i>=n){up.push(oA);CN.push(oD);down.push(kY);yZ=down[i]+CN[i]/2;AQ.push(yZ!=0?(up[i]+CN[i]/2)/yZ*100:null);oA-=Bz[i-n];oD-=Co[i-n];kY-=Cs[i-n];}else{up.push(0);CN.push(0);down.push(0);AQ.push(null)}if(o<c){oA+=v;Bz.push(v);Co.push(0);Cs.push(0);}else if(o>c){kY+=v;Bz.push(0);Co.push(0);Cs.push(v);}else{oD+=v;Bz.push(0);Co.push(v);Cs.push(0);}i++;}K.VR.data=bL([AQ]);}return K.VR.data;};ud=function(){eR('ASI')};wq=function(){if($T.aF(K.ASI.data)){var i=1,j=K.aJ,RSV0,RSV1,RSV2,RSV3,KVAL0,KVAL1,KDV=0,ASI=[0],o,h,l,c,pc,rG;while(i<j){o=K.an(i,1,1);h=K.an(i,2,1);l=K.an(i,3,1);c=K.an(i,4,1);pc=K.an(i-1,4,1);rG=K.an(i-1,1,1);RSV0=M.a(h-pc);RSV1=M.a(l-pc);RSV2=h-l;RSV3=M.a(c-pc);if(RSV2>=RSV0&&RSV2>=RSV1)KVAL0=RSV2+RSV3/4;else if(RSV1>=RSV0&&RSV1>=RSV2)KVAL0=RSV1+RSV0/2+RSV3/4;else if(RSV0>=RSV1&&RSV0>=RSV2)KVAL0=RSV0+RSV1/2+RSV3/4;KVAL1=M.iV(RSV0,RSV1);RSV0=c-pc+(c-o)/2+(pc-rG);if(KVAL0!=0)KDV+=RSV0/KVAL0*KVAL1/3*50;ASI.push(KDV);i++;}ASI[0]=null;K.ASI.data=bL([ASI]);}return K.ASI.data;};um=function(){eR('EMV')};vL=function(n,m){if($T.aF(K.EMV.data)){var i=1,j=K.aJ,A=[(K.an(i,2,1)+K.an(i,3,1))/2],MID=[0],BRO=[0],EMV=[null],EMVMA,sum=0,h,l,v;n=M.kC(n,28);n=M.iV(n,5);n=n||14;m=M.kC(m,12);m=M.iV(m,1);m=m||9;while(i<j){h=K.an(i,2,1);l=K.an(i,3,1);v=K.an(i,6,1);A.push((h+l)/2);MID.push(A[i]-A[i-1]);BRO.push(v>0?(h-l)*10000/v:0);if(i>=n){EMV.push(sum/n*1000000);sum-=MID[i-n]*BRO[i-n];}else EMV.push(null);sum+=MID[i]*BRO[i];i++;}EMVMA=bM(m,EMV,'PMA')[0];EMVMA=pH(n+m-1,EMVMA);K.EMV.data=bL([EMV,EMVMA]);}return K.EMV.data;};yE=function(){eR('ROC')};wl=function(n){if($T.aF(K.ROC.data)){var i=0,j=K.aJ,ROC=[],c,hV;n=M.kC(n,99);n=M.iV(n,3);n=n||12;while(i<j){if(i>=n){c=K.an(i,4,1);hV=K.an(i-n,4,1);ROC.push([(c-hV)/hV*100]);}else ROC.push([null]);i++;}K.ROC.data=ROC;}return K.ROC.data;};uO=function(){eR('MTM')};vU=function(n,m){if($T.aF(K.MTM.data)){var i=0,j=K.aJ,MTM=[],MTMMA=[],c,hV;n=M.kC(n,99);n=M.iV(n,3);n=n||12;m=M.kC(m,99);m=M.iV(m,3);m=m||6;while(i<j){if(i>=n){c=K.an(i,4,1);hV=K.an(i-n,4,1);MTM.push(c-hV);}else MTM.push(null);i++;}MTMMA=bM(m,MTM,'PMA')[0];K.MTM.data=bL([MTM,MTMMA]);}return K.MTM.data;};wC=function(){var L=K.bp,aK=K.dS.aK.i(),zoom=2,SAR=wH(),type='SAR';if(K.cF>2){zoom=3}K.rate*=1/zoom;K.gY=K.hx/zoom+R(K.cz*K.rate);for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}K.iw(L,i,aK,type,1);L+=K.cT;}K.rate/=1/zoom;K.gY=K.hx+R(K.cz*K.rate);};wH=function(){if($T.aF(K.SAR.data)){var n=4,i=0,j=K.aJ,AF=0.02,SAR=[],iF=[],type=true,first=true,z,l,gT,h,eu,c,sum=0,yZ;for(i=0;i<n;i++){SAR[i]=null;iF[i]=null;}while(i<j){c=K.an(i,4,1);l=K.an(i,3,1);gT=K.an(i-1,3,1);h=K.an(i,2,1);eu=K.an(i-1,3,1);if(first){if(type){sum=eu;for(z=0;z<n;z++){yZ=K.an(i-z-1,3,1);if(yZ<sum)sum=yZ;}iF[i]=true;}else{sum=eu;for(z=0;z<n;z++){yZ=K.an(i-z-1,2,1);if(yZ>sum)sum=yZ;}iF[i]=false;}SAR[i]=sum;AF=0.02;first=false;}else{if(type){sum=eu;for(z=0;z<n;z++){yZ=K.an(i-z-1,2,1);if(yZ>sum)sum=yZ;}SAR[i]=SAR[i-1]+AF*(sum-SAR[i-1]);if(h>eu)AF=M.kC(AF+0.02,0.2);iF[i]=true;if(SAR[i]>c){type=false;first=true;}}else{sum=gT;for(z=0;z<n;z++){yZ=K.an(i-z-1,3,1);if(yZ<sum)sum=yZ;}SAR[i]=SAR[i-1]+AF*(sum-SAR[i-1]);if(l<gT)AF=M.kC(AF+0.02,0.2);iF[i]=false;if(SAR[i]<c){type=true;first=true;}}}i++;}K.SAR.data=[SAR,iF];}return K.SAR.data;};uQ=function(){var L=K.bp,zoom=2,data=vT(),type='us',aX=data[K.from+1][0],bF=aX,item,aK=K.dS.aK.i();if(K.cF>2){zoom=3}K.rate*=1/zoom;K.gY=K.hx/zoom+R(K.cz*K.rate);for(var i=K.from;i<K.to+K.step-1;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}K.iw(L,i,aK,type,1);L+=K.cT;}K.rate/=1/zoom;K.gY=K.hx+R(K.cz*K.rate);if(!$T.ao(data))return;for(var i=K.from+1;i<K.to;i+=K.step){if(!data[i])continue;for(var j=0;j<data[i].length;j++){item=data[i][j];if(i>=1)aX=M.iV(aX,item);if(i>=1)bF=M.kC(bF,item);}}var zoom=(aX-bF);var rate=K.bv/(zoom);K.WR.aE=rate;K.WR._blank=bF*0.05;for(i=0;i<data[0].length;i++)K.dj(aK,data,i.toString(),'',K.bv,bF,rate,C.av('C_kavg'+i));};vT=function(){if($T.aF(K.MCST.data)){var MCST;K.MCST.data=bL([MCST]);}return K.MCST.data;};K.dj=function(aK,fR,a,b,uM,cz,rate,color,bn){var af,ae,L=K.bp,top,ba=bn&&E(K.line)[K.from][7];aK.b();for(var i=K.from,ah=K.to+K.step-1;i<ah;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}if(fR[i]){ae= !$T.aF(b)?fR[i][a][b]:(!$T.aF(a)?fR[i][a]:fR[i]);if(!$T.aF(ae)){top=uM-(ae-cz)*rate;if($T.aF(af)||(bn&& !K.q&&ba!=E(K.line)[i][7])){aK.m(L,top)}else{try{aK.l(L,top)}catch(e){jn('问题1');jn(L,top,e);}}}af=ae;ba=bn&&E(K.line)[i][7]}L+=K.cT}aK.s(color)};K.lL=function(aK,ac,color,bn){var af,ae,L=K.bp,ba=bn&&E(K.line)[K.from][7];aK.b();for(var i=K.from,ah=K.to+K.step-1;i<ah;i+=K.step){if(i>K.to-1){i=K.to-1;L=K.bp+K.width*(i-K.from)}ae=ac(i);if(!$T.aF(ae)){if($T.aF(af)||(bn&& !K.q&&ba!=E(K.line)[i][7])){ba=bn&&E(K.line)[i][7];aK.m(L,ae);try{}catch(e){jn('问题2');jn(L,ae,!$T.aF(ae))}}else{aK.l(L,ae);}}af=ae;L+=K.cT}aK.s(color)};wi=function(a){if(!E().lt)return 0;var bF=0,aX=$T.ao(E().lt)-1,cG=aX,d;while(aX-bF>1){d=E().lt[cG][0];if(d<a){bF=cG}else if(d>a){aX=cG}else{return E().lt[cG][1];}cG=R((aX+bF)/2)}return E().lt[bF][1]}})();