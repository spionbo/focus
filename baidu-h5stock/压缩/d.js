SERVER=$.url+'php';(function($){function iframe(bH){var w=$.main.width,h=window.innerHeight-50-45-2;$.iframe=$.create('div',{ps:1,w:w,h:h});$.iframe.id='stockdiv';$.getScript([SERVER+'/js.php?GWDM='+bH],function(){});return $.iframe;};function C(C,val,aN,bu){C=C=='s'?'span':(C=='c'?'canvas':C);var c=aN?" class='"+aN+"'":'';return "<"+C+c+" "+(bu||'')+">"+(typeof val=='undefined'||val==null?'':val).toString()+"</"+C+">";};function div(name,val,bu){return C('div',val,name,bu);};function tags(name,R,tr){var s=tr?"<"+tr+">":'';s+=bQ(name,R,function(n){return n;});s+=tr?"</"+tr+">":'';return s;};function bQ(name,R,fn,bu){var s='';$.F(R,function(i){s+=name?C(name,fn(this,i),0,bu):fn(this,i);});return s;};function ul(R,aN){return div(aN,tags('li',R,'ul'));};function input(aN,type,val,v){v=v?' placeholder='+v:'';return "<input type='"+(type||"text")+"'class='"+(aN||'text')+"'"+(val||'')+v+">"};function img(id,src,w,h,bu){id=id?'id="'+id+'"':'';bu=bu?(' onclick='+bu):'';return "<img "+bu+id+" width='"+(w||'auto')+"' height='"+(h||'auto')+"' src='"+src+"'/>";};function tab(aN,div){aN=aN?"class='"+aN+"'":'';div=div?"<div class='"+div+"'>":'';return div+"<table "+aN+" width='100%' cellspacing='0' cellpadding='0'>";};function th(R){return tags('th',R,'tr');};function ay(demo,fn,C,num,b){var R=demo.getElementsByTagName(C);num=num-1||0;$.F(R,function(n){if(n!=b&&(n%num==0|| !num)){R[n].onclick=function(){fn.call(this,n);};}})};$.div={head:function(name,dc,key,i,t,s){var eB=key?'$.update.cZ('+i+')':'$.update.home()';var back=C('s',C('c','','head_return'+i),'return','onclick='+eB);var f5=t?C('c','','f5'+i,'onclick=$.update.refresh('+i+')'):'',se= !s?C('c','','head_img'+i,'onclick=$.update.search('+i+')'):'';var s=div('input',f5+se);s+=dc?back:'';s+=C('h1',name);return s;},back:function(){var d=$.create('div',{i:div('back',ul([[div('radio')+"1、页面打开缓慢"],[div('radio')+"2、行情报价无数据或数据错误"],[div('radio')+"3、行情图出错"],[div('radio')+"4、页面错乱或错位"],[div('radio')+"5、我有其他问题"]],'choose')+C('textarea','','msg',"placeholder='请控制200汉字400英文字以内'"))+div('back',div('tel','联系方式:'+input(0,'tel',0,'选填')))+div('back',div('button','提交','onclick=$.update.ci()')+div('text','感谢您对我们提出了宝贵的意见，这对我们很重要！我们将在最短时间内作出回应。欢迎您继续关注督促我们的工作，您的建议和意见是推动我们工作不断前进的源源动力。'))});var b=[];ay(d,function(n){b[n]= !b[n];if(b[n]){$.addClass(this.firstChild,'cur');}else{$.removeClass(this.firstChild,'cur');}if(n==4){d.cE.call($.aG(d,'msg'));}},'li');return d;},ad:function(aN,src,w,h,event){return div(aN,img(0,src,w||'100%',h,event));},search:function(i){$.update.load();var key=$.create(0,{w:'100%',position:'fixed',bottom:0}),d=$.create('div',{ps:0,i:"<div id='search'>"+div('text','代码/拼音',"id='srchIpt-'")+div('delete','×')+"</div>"});var aU=$.create('div',{ps:0,t:0,w:'100%'});d.list=function(R){aU.innerHTML=div('searlist',tab()+bQ('tr',R,function(o){return C('td',o[0])+C('td',o[1])+C('td',C('s','+','select'),0,"width='50' align='center'")}))+'</table>';$.bb(aU,'mousedown',function(event){event=$.aS(event,1);d.mousedown();this.down=1;this.bC=event.clientY;this.bU=event.clientY;this.startTime=$.aT();});$.bb(aU,'mousemove',function(event){if(!this.down){return;}event=$.aS(event);var y=event.clientY-this.bC;$.M(aU,{t:parseInt(aU.style.top)+y});this.bC=event.clientY;});$.bb(aU,'mouseup',function(){var bN=this;if(!bN.down){return;}bN.down=0;if(bN.releaseCapture){bN.releaseCapture()};var interval=$.aT()-bN.startTime;var y=bN.bC-bN.bU;y=y>30||y< -30?y:0;if(interval<300){var cn=bN.bC-bN.bU;var height=cn/interval*40;$.aY(aU,height);}else{var top=parseInt(aU.style.top);var height=aU.offsetHeight;var d;if(top>0){$.aY(aU,top/5);}else if(Math.abs(top)>(d=height-$.main.parentNode.offsetHeight)){$.aY(aU,(Math.abs(top)-d)/ -5);}}});$.F(aU.getElementsByClassName('select'),function(i){this.parentNode.onclick=function(e){$.aS(e);$.aC({'code':'code_'+R[i][0]},function(){$.dK=$.selected.dP($.bE.code,0,$.bE.name,$.bE.np,$.bE.pl,$.bE.type);$.update.bZ();});}});ay(aU,function(i){var ak=10;$.update.data({code:R[i][0],type:R[i][2]},ak);$.demo.removeChild($.demo.div);delete $.demo.div;},'tr');};var num=[['Q','W','E','R','T','Y','U','I','O','P'],['A','S','D','F','G','H','J','K','L'],[C('s','↑','large'),'Z','X','C','V','B','N','M',C('s','×','close')],['123','space','搜索']];function k(b){if(b==1){function tabs(R,name){return div(name,tab()+tags('tr',[bQ('td',R,function(o){return C('div',o)},"width='"+100/R.length+"%'")])+'</table>')};key.innerHTML=C('s',tabs(num[0],'tab1')+tabs(num[1],'tab2')+tabs(num[2],'tab3')+tabs(num[3],'tab4'),'s-key tab')}else{var main=[[C('span',tags('div',[600,601,'000','002',300]),'num')],[tab()+C('tr',C('td',tab()+C('tr',tags('div',[1,4,7],'td')+tags('div',[2,5,8],'td')+tags('div',[3,6,9],'td'))+'</table>','c')+C('td',tags('div',[C('s','×','close'),'隐藏','清空']),'r',"width='25%'"),'main')+C('tr',C('td',tab()+C('tr',C('td',C('div','ABC'),'l',"width='35%'")+C('td',C('div','0'),'c',"width='30'")+C('td',C('div','搜索'),'r',"width='35%'"),'bt')+'</table>',0,'colspan=2'))+'</table>']];key.innerHTML=tab('s-key')+C('tr',C('td',main[0],'l',"width='20%'")+C('td',main[1],'c',"width='80%'"))+'</table>'}};k(0);d.key=key;var bx=null,lower=false;(function bx(){var val,dA,aA,li=key.getElementsByTagName('div');$.F(li,function(i){$.bb(this,'mousedown',function(e){e=$.aS(e);$.addClass(this,'hover');aA=this.firstChild;dA=aA.nodeType;if(dA===1){switch(aA.firstChild.nodeValue){case '×':d.cs(false);break;case '↑':var R=[];lower= !lower;$.F(num,function(i){R[i]=this;$.F(this,function(j){if((/^\w/).test(this)){R[i][j]=lower?this.toLowerCase():this.toUpperCase();}})});num=R;k(1);bx();break;}}else{val=aA.nodeValue;switch(val.toLowerCase()){case '隐藏':key.h=key.clientHeight;key.style.height='0';break;case '搜索':if(aU.getElementsByTagName('tr')[0]){$.update.data({code:$.searchResult[0][0],type:$.searchResult[0][2]},10);$.demo.div.className='hide';}break;case '123':k(0);bx();break;case 'abc':k(1);bx();break;case 'space':d.cs(' ');break;default:d.cs(val);return false;}}});$.bb(this,'mouseup',function(){$.removeClass(this,'hover');});})})();d.appendChild(aU);d.appendChild(key);$.update.load(true);return d;},nav:function(R){return tab()+bQ('td',R,function(o,n){return div('can',div('icon',C('c','',('nav_img'+n))+o));})+'</table>'},dk:function(R){return div('nav',tab()+tags('td',R)+'</table>')},news:function(O,i,aN,h){var s=div('public news',(aN==1?C('h2',C('div','重要新闻','name'),'title'):'')+div('content',i== -1?"<p class='tc'><br>"+O[0].name+"</p>":C('ul',bQ('li',O,function(o){return C('s','&gt;')+div('name dot',o.name)+div('date',o.date);}))+(aN?'':div(('showmore'+' bJ'+i),'点击查看更多'))));var d=$.create(0,{i:s});if(O.length==1&&(O[0].name.indexOf('暂无相关')+1)){return d}ay(d,function(n){var c=i>=20?11:1||1;$.update.data(O[n],c,i,h);},'li');if(!aN){$.aG(d,'showmore').onclick=function(){$.update.bJ(this.previousSibling,i);}}return d;},aR:function(T,O,i,c,h){var s='',m=$.main.pages,parent=s==0?m[1].content:m[2].content;$.F(O,function(){s+="<li>"+C('s','&gt;')+div('name dot',this.name)+div('date',this.date)+"</li>"});var d=$.create(0,{i:s});ay(d,function(n){$.update.data(O[n],c||1,i,h);},'li');T.appendChild(d);var s=$.status,h=d.clientHeight;$.M(d,{h:0,o:'hidden'});if(h>10){$.move(d,0,h,2000);}if(O==null||O.length<20){var bJ=$.aG(document,'bJ'+i);bJ.parentNode.removeChild(bJ);}$.update.load(true);},list:function(O,icon,aL,ck,click,up,aE,bI,t){function s(O,up,c){return tab('tab','list')+C('tr',bQ(0,O.m,function(o,n){if(aL&&aL[n]==1){if(n==(c!=null?c:icon)){return C('th',o+div('icon',up?'&uarr;':'&darr;'));}else{return C('th',o);}}return C('th',o);}))+bQ('tr',O.c,function(o){return C('td',div(0,o.name)+(isNaN(o.code)?'':o.code.length>6?'':div('code',o.code)),'tit1','width="100"')+C('td',o.n1,(aE[0]==1?(parseFloat(o['n'+(bI?bI:1)])>0?'red':'green'):''))+C('td',o.n2,(aE[1]==1?(parseFloat(o['n'+(bI?bI:2)])>0?'red':'green'):''))+C('td',o.n3,(aE[2]==1?(parseFloat(o['n'+(bI?bI:3)])>0?'red':'green'):''))})+"</table></div>";};var d=$.create(0,{i:s(O)}),b=0;(function be(){ay(d,function(n){if(!click){$.af('个股页');$.update.data(O.c[n-1],ck)}},'tr',0,0);var na;ay(d,function(n){if(aL&&aL[n]==1){if(n==1){na='n1'}if(n==2){na='n2'}if(n==3){na='n3'}b= !b;if(!O.update){O.c=$.sort(O.c,na,b);d.innerHTML=s(O,b,n);be();}else{$.bn.fw(t,n,b,function(dg){d.innerHTML=s(dg,b,n);O=dg;be();});}}},'th');})();return d;},select:function(O,et,fu,j){var s,ab=[];if(!et){O=O.split(',');}$.F(O,function(){ab.push($.selected.parseObj(this));});var aL=[0,1,1,0],na,b=0;function s(b,n){if(n){var R=['简称','最新价','涨幅%'+div('icon',b?'&uarr;':'&darr;'),'操作'];if(n==1){R=['简称','最新价'+div('icon',b?'&uarr;':'&darr;'),'涨幅%','操作'];}}else{var R=['简称','最新价','涨幅%','操作'];}return th(R);};var d=$.create(0,{i:tab('tab','list')+s(0)+bQ('tr',ab,function(o){return C('td',div(0,o.name)+div('code',o.code),'tit1')+C('td',$.aX(o.np),o.ai=='s'?(o.stp==1?'gray':(o.pl>0?'red':'green')):(o.pl>0?'red':'green'))+C('td',o.pl,o.ai=='s'?(o.stp==1?'gray':(o.pl>0?'red':'green')):(o.pl>0?'red':'green'))+C('td',C('s','×','close delete'))})+"</table></div>"+C('a',img(0,'images/ad.jpg','100%','50'),0,'href="http://4g.stockstar.com" target="_blank"')});$.F(d.getElementsByClassName('delete'),function(i){this.parentNode.onclick=function(e){$.aS(e);$.update.as(ab[i].id,'code_'+ab[i].code,ab[i].name,true,ab[i].ai);}});ay(d,function(n){if(n>0){var o=ab[n-1];$.update.data(o,o.ai=='s'?10:20,j);}},'tr',0);(function be(){ay(d,function(n){if(aL[n]==1){if(n==1){na='np'}if(n==2){na='pl'}b= !b;ab=$.sort(ab,na,b);d.firstChild.firstChild.innerHTML=s(b,n)+bQ('tr',ab,function(o){return C('td',o.name)+C('td',$.aX(o.np),(o.pl>0?'red':'green'))+C('td',o.pl,o.pl<0?"green":"red")+C('td',C('s','×','close delete'))});be();F();}},'th');ay(d,function(n){if(n>0){var o=ab[n-1];$.update.data(o,o.ai=='s'?10:20,j);}},'tr',0);})();return d;},copyright:function(){$.update.load(true);return div('copyright',"<p>© 2012 证券之星</p><p><a class='blue' href='/p/'>彩版</a> | 触屏版</p>");},detail:{index:function(k){var bH=$.bE.code;var pre=bH.substring(0,1);bH=(pre=='0'?'S':'Z')+bH;return iframe(bH);},news:function(O,className){return div('detail',div('box',C('h2',O.name)+div('info',C('s',O.date)+C('s',O.time)+C('s',O.source,'source')))+div('box',div('content','<p>'+O.content)));},company:function(O,id){return div('company',div('explain',tab('tab')+bQ('tr',[['公司名称',O.name],['主营业务',O.n1],['最新总股本',O.n2],['最新流通A股',O.n3],['公司网址',O.n4],['所属板块',O.n5],['董事长',O.n6],['董秘',O.n7],['交易提示',O.n8],['最新预约披露',O.n9],['最新龙虎榜',O.n10]],function(o){return C('td',o[0],'tit','width="100"')+C('td',o[1],0,"style='white-space:normal;word-break:break-all;'");}))+'</table><br>'+div('public income',C('h2',div('name','主营业务收入'),'title')+tab('tab')+C('tr',C('th')+C('th','主营收入(万元)')+C('th','收入比例'))+bQ('tr',O.sr,function(o){return tags('td',[o[0],o[1],(o[2]==''?'':o[2]+'%')])})+'</table>'));},company1:function(O,id){var gd=O.gd;return div('company',div('tit',O.name)+div('table',tab()+C('tr',C('th')+C('th','股本数量'))+bQ('tr',O.content,function(o){return C('td',o[0],'tl')+C('td',o[1])})+"</table><br>")+div('public',C('h2',div('name',gd.title),'title')+tab('tab')+tags('th',[gd.menu[0],gd.menu[1],gd.menu[2]],'tr')+bQ('tr',gd.content,function(o){return C('td',o.name)+C('td',o.n1,0,'width="90"')+C('td',o.n2,0,'width="90"')})+"</table>"))},company2:function(O,id){var c=O.content;return div('company',div('tit','主要财务指标：')+div('table',tab()+C('tr',C('th','报告期','tit1')+C('th',c[0].date||'','tit1')+C('th',c[1].date||'','tit1')+C('th',c[2].date||'','tit1'))+bQ('tr',O.name,function(o,i){i=i+1;return C('td',o,'tit')+tags('td',[c[0]['n'+i],c[1]['n'+i],c[2]['n'+i]])})+"</table><br>")+div('public',C('h2',div('name',O.cw[0]),'title')+div('content',C('p',O.cw[1]))+'<br>')+div('public',C('h2',div('name',O.gk[0]),'title')+div('content',C('c','','funds-cw'))+'<br>')+div('public',C('h2',div('name',O.yj[0]),'title')+div('content',C('p',O.yj[1]))));},f10:function(k){var bH=$.bE.code;var pre=bH.substring(0,1);bH=(pre=='6'||pre=='9'?'S':'Z')+bH;return iframe(bH)},dF:function(O){return div('funds',div('info',div('left',C('c','','fundspic1'))+div('right',C('h3',O.n1)+tags('p',[O.n2,O.n3,O.n4])))+tab('table')+C('tr',bQ('th',O.jb.menu,function(o){return o;}))+bQ('tr',O.jb.content,function(o){return tags('td',[o.n1,o.n2,o.n3,o.n4])})+"</table><div class='blank'></div>"+div('public table',C('h2',div('name',O.name),'title')+div('content',tab('tab')+C('tr',bQ('th',O.lx.menu,function(o){return o;}))+bQ('tr',O.lx.content,function(o){return tags('td',[o.n1,o.n2,o.n3,o.n4])})+'</table>')));},zg:function(T,id){var ht=$.url+'xml/',h1=ht+'Fundamentals/'+id+'.xml',h2=ht+'Capitalflows/'+id+'.xml',h3=ht+'TechnicalAnalysis/'+id+'.xml';function tel(t,v){t=t.replace(/。<\/p>$/,'</p>');t=t.replace(/<\/p>$/,'......</p>');t+=C('a',v+'，免费咨询'+C('s','4008-900-858','icon'),'tel',"href='tel:4008900858'");return t;};function dl(tit,ak){return C('dl',C('dt',tit)+C('dd',ak))};var cK;function type(child){if(child.nodeType==1){cK=child;}else{type(child.nextSibling);}return cK;};function bo(xml,n){return type(xml.childNodes[n]).lastChild.nodeValue;};function cz(n){var x='';for(var i=0;i<5;i++){if(i>=n){x+="<span style='color:#999'>★</span>";}else{x+='★'}}return "<span style='font-family:SimSun;padding-left:10px'>"+x+"</span>";};function dN(xml){var val='',index=0;$.F(xml.childNodes,function(i){if(i==0&&this.nodeType!=1){index=1;}if(i!=index){if(this.nodeType==1){val+='<p>'+this.nodeName+'：'+this.lastChild.nodeValue+'</p>';}}});return val;};var v1,v2,v3,index=0,x1,x2,x3,bY,f1,f2,f3;$.F([h1,h2,h3],function(i){$.fB(this,function(xml){index++;xml=type(xml.lastChild.childNodes[0]);if(i==0){x1=parseInt(bo(xml,0));f1=bo(xml,2);v1=dl('基本面'+cz(x1),tel(dN(xml),'更多基本面'))}if(i==1){x2=parseInt(bo(xml,0));f2=bo(xml,2);v2=dl('资金面'+cz(x2),tel(dN(xml),'更多资金面'))}if(i==2){x3=parseInt(bo(xml,0));f3=bo(xml,1);v3=dl('技术面'+cz(x3),tel(dN(xml),'更多技术面'))}if(index==3){bY=Math.round((x1+x2+x3)/3);var xv='',d='';switch(bY){case 1:d='E';xv='继续持有需要勇气';break;case 2:d='D';xv='该股成绩差强人意';break;case 3:d='C';xv='该股近期表现平平';break;case 4:d='B';xv='该股处于中上游哦';break;case 5:d='A';xv='该股是个优等生哦';break;default:xv='暂无相关评分';}var name='综合评级：'+'<b style="color:#b04807; padding-right:5px;">'+d+'</b>'+xv,zh=C('p',f1+'从技术面看：'+f2+'从资金面看：'+f3);zh=tel(zh,'更多操作建议');T.innerHTML=div('zg',C('p','以下内容由新兰德提供','tc')+C('h2',name)+zh+v1+v2+v3);}})})}},pop:function(tit,ak,id,code,ai){var value=ak?C('s',ak):div('input','确定',"onclick=$.update.as("+id+",'"+code+"',0,1,'"+ai+"')")+div('input gray','取消',"onclick=$.update.as(0,'"+code+"',0,0,'"+ai+"')");var close=ak?"":C('s','×','close',"onclick=$.update.as(0,'"+code+"',0,0,'"+ai+"')");return div('pop',div('bg')+div('box',div('title',close+tit)+div('content',value)));}};})($);